/*!
 * Dynamsoft JavaScript Library
 * @product Dynamsoft Label Recognizer JS Edition
 * @website http://www.dynamsoft.com
 * @copyright Copyright 2022, Dynamsoft Corporation
 * @author Dynamsoft
 * @version 2.2.2 (js 20220302)
 * @fileoverview Dynamsoft JavaScript Library for Label Recognizer
 * More info on DLR JS: https://www.dynamsoft.com/label-recognizer/sdk-javascript/
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Dynamsoft=e.Dynamsoft||{},e.Dynamsoft.DLR={}))}(this,(function(e){"use strict";function t(e,t,i,s){return new(i||(i=Promise))((function(r,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function a(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))}var i,s,r;e.EnumDLRImagePixelFormat=void 0,(i=e.EnumDLRImagePixelFormat||(e.EnumDLRImagePixelFormat={}))[i.IPF_BINARY=0]="IPF_BINARY",i[i.IPF_BINARYINVERTED=1]="IPF_BINARYINVERTED",i[i.IPF_GRAYSCALED=2]="IPF_GRAYSCALED",i[i.IPF_NV21=3]="IPF_NV21",i[i.IPF_RGB_565=4]="IPF_RGB_565",i[i.IPF_RGB_555=5]="IPF_RGB_555",i[i.IPF_RGB_888=6]="IPF_RGB_888",i[i.IPF_ARGB_8888=7]="IPF_ARGB_8888",i[i.IPF_RGB_161616=8]="IPF_RGB_161616",i[i.IPF_ARGB_16161616=9]="IPF_ARGB_16161616",i[i.IPF_ABGR_8888=10]="IPF_ABGR_8888",i[i.IPF_ABGR_16161616=11]="IPF_ABGR_16161616",i[i.IPF_BGR_888=12]="IPF_BGR_888",e.EnumDLRErrorCode=void 0,(s=e.EnumDLRErrorCode||(e.EnumDLRErrorCode={}))[s.OK=0]="OK",s[s.UNKNOWN=-1e4]="UNKNOWN",s[s.NO_MEMORY=-10001]="NO_MEMORY",s[s.NULL_POINTER=-10002]="NULL_POINTER",s[s.LICENSE_INVALID=-10003]="LICENSE_INVALID",s[s.LICENSE_EXPIRED=-10004]="LICENSE_EXPIRED",s[s.FILE_NOT_FOUND=-10005]="FILE_NOT_FOUND",s[s.FILETYPE_NOT_SUPPORTED=-10006]="FILETYPE_NOT_SUPPORTED",s[s.BPP_NOT_SUPPORTED=-10007]="BPP_NOT_SUPPORTED",s[s.IMAGE_READ_FAILED=-10012]="IMAGE_READ_FAILED",s[s.TIFF_READ_FAILED=-10013]="TIFF_READ_FAILED",s[s.PDF_READ_FAILED=-10021]="PDF_READ_FAILED",s[s.PDF_DLL_MISSING=-10022]="PDF_DLL_MISSING",s[s.RECOGNITION_TIMEOUT=-10026]="RECOGNITION_TIMEOUT",s[s.JSON_PARSE_FAILED=-10030]="JSON_PARSE_FAILED",s[s.JSON_TYPE_INVALID=-10031]="JSON_TYPE_INVALID",s[s.JSON_KEY_INVALID=-10032]="JSON_KEY_INVALID",s[s.JSON_VALUE_INVALID=-10033]="JSON_VALUE_INVALID",s[s.JSON_NAME_KEY_MISSING=-10034]="JSON_NAME_KEY_MISSING",s[s.JSON_NAME_VALUE_DUPLICATED=-10035]="JSON_NAME_VALUE_DUPLICATED",s[s.TEMPLATE_NAME_INVALID=-10036]="TEMPLATE_NAME_INVALID",s[s.PARAMETER_VALUE_INVALID=-10038]="PARAMETER_VALUE_INVALID",s[s.SET_MODE_ARGUMENT_ERROR=-10051]="SET_MODE_ARGUMENT_ERROR",s[s.GET_MODE_ARGUMENT_ERROR=-10055]="GET_MODE_ARGUMENT_ERROR",s[s.CHARACTER_MODEL_FILE_NOT_FOUND=-10100]="CHARACTER_MODEL_FILE_NOT_FOUND",function(e){e[e.LST_MANUAL_SPECIFICATION=1]="LST_MANUAL_SPECIFICATION",e[e.LST_PREDETECTED_REGION=2]="LST_PREDETECTED_REGION",e[e.LST_BARCODE=4]="LST_BARCODE"}(r||(r={}));const n=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name&&"undefined"==typeof HTMLCanvasElement),o=!n&&"undefined"==typeof self,a=n?global:o?{}:self;class l{constructor(){this._canvasMaxWH="iPhone"==l.browserInfo.OS||"Android"==l.browserInfo.OS?2048:4096,this._instanceID=void 0,this.bSaveOriCanvas=!1,this.oriCanvas=null,this._region=null,this._timeStartRecognize=null,this._timeEnterInnerDLR=null,this.recognizeRecords={},this.drawRegionsultRecords={},this.bDestroyed=!1,this._setWarnnedEx=new Set,this._lastErrorCode=0,this._lastErrorString="",this._lastInnerDecodeDuration=0,this._clickIptSingleFrameMode=()=>{},this.intervalTime=0,this._intervalGetVideoFrame=0,this.array_getFrameTimeCost=[],this.array_decodeFrameTimeCost=[],this._bPauseScan=!1,this._intervalDetectVideoPause=1e3,this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._selCam=null,this._selRsl=null,this._selMinLtr=null,this._optGotMinLtr=null,this._btnClose=null,this._minLetter=0,this._soundOnSuccessfullRead=!n&&new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"),this.bPlaySoundOnSuccessfulRead=!1,this.bVibrateOnSuccessfulRead=!1,this.vibrateDuration=300,this.regionMaskFillStyle="rgba(0,0,0,0.5)",this.regionMaskStrokeStyle="rgb(254,142,20)",this.regionMaskLineWidth=2,this.highlightFillStyle="rgba(254,180,32,0.3)",this.highlightStrokeStyle="rgba(254,180,32,0.9)",this.highlightLineWidth=1,this.beingLazyDrawRegionsults=!1,this.currentSettingsTemplate="cppdefault",this.dce=null,this._onCameraSelChange=()=>{this._divScanLight&&(this._divScanLight.style.display="none"),this._drawRegionsults(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this._onResolutionSelChange=()=>{this._divScanLight&&(this._divScanLight.style.display="none"),this._drawRegionsults(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this._onMinLetterSelChange=e=>t(this,void 0,void 0,(function*(){let t=e.target.value;if("got"===t)return;t=JSON.parse(t);let i=JSON.parse(yield this.outputRuntimeSettingsToString());i.LabelRecognizerParameterArray[0].LineStringLengthRange=[t,999],i.TextAreaArray[0].LineStringLengthRange=[t,999],yield this.updateRuntimeSettingsFromString(i)})),this._onCloseBtnClick=()=>{this.stopScanning(!0)},this._tempSolutionStatus="closed"}static getVersion(){return this._version}static get license(){return this._license}static set license(e){if("unload"!=this._loadWasmStatus)throw new Error("`license` is not allowed to change after `createInstance` or `loadWasm` is called.");l._license=e}static initLicense(e){if("unload"!=this._loadWasmStatus)throw new Error("`license` is not allowed to change after `createInstance` or `loadWasm` is called.");l._license=e}static set sessionPassword(e){if("unload"!=this._loadWasmStatus)throw new Error("`sessionPassword` is not allowed to change after `createInstance` or `loadWasm` is called.");l._sessionPassword=e}static get sessionPassword(){return this._sessionPassword}static detectEnvironment(){return t(this,void 0,void 0,(function*(){let e={wasm:"undefined"!=typeof WebAssembly&&("undefined"==typeof navigator||!(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&/\(.+\s11_2_([2-6]).*\)/.test(navigator.userAgent))),worker:!!(n?process.version>="v12":"undefined"!=typeof Worker),getUserMedia:!("undefined"==typeof navigator||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),camera:!1,browser:this.browserInfo.browser,version:this.browserInfo.version,OS:this.browserInfo.OS};if(e.getUserMedia)try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach((e=>{e.stop()})),e.camera=!0}catch(e){}return e}))}static get engineResourcePath(){return this._engineResourcePath}static set engineResourcePath(e){if("unload"!=this._loadWasmStatus)throw new Error("`engineResourcePath` is not allowed to change after `createInstance` or `loadWasm` is called.");if(null==e&&(e="./"),n||o)l._engineResourcePath=e;else{let t=document.createElement("a");t.href=e,l._engineResourcePath=t.href}this._engineResourcePath.endsWith("/")||(l._engineResourcePath+="/")}static get licenseServer(){return this._licenseServer}static set licenseServer(e){if("unload"!=this._loadWasmStatus)throw new Error("`licenseServer` is not allowed to change after `createInstance` or `loadWasm` is called.");if(null==e)l._licenseServer=[];else{e instanceof Array||(e=[e]);for(let t=0;t<e.length;++t){if(!n&&!o){let i=document.createElement("a");i.href=e[t],e[t]=i.href}e[t].endsWith("/")||(e[t]+="/")}l._licenseServer=e}}static get deviceFriendlyName(){return this._deviceFriendlyName}static set deviceFriendlyName(e){if("unload"!=this._loadWasmStatus)throw new Error("`deviceFriendlyName` is not allowed to change after loadWasm is called.");l._deviceFriendlyName=e||""}get ifSaveOriginalImageInACanvas(){return this.bSaveOriCanvas}set ifSaveOriginalImageInACanvas(e){this.dce&&(this.dce.ifSaveOriginalImageInACanvas=e),this.bSaveOriCanvas=e}getOriginalImageInACanvas(){return this.oriCanvas}set region(e){this._region=e,this.dce&&!this.singleFrameMode&&(this.beingLazyDrawRegionsults=!0,setTimeout((()=>{this.beingLazyDrawRegionsults&&this._drawRegionsults()}),500))}get region(){return this._region}static isWasmLoaded(){return"loadSuccess"==this._loadWasmStatus}isContextDestroyed(){return this.bDestroyed}static get lastErrorCode(){return this._lastErrorCode}static get lastErrorString(){return this._lastErrorString}get lastErrorCode(){return this._lastErrorCode}get lastErrorString(){return this._lastErrorString}static get defaultUIElementURL(){var e;return null===(e=this._defaultUIElementURL)||void 0===e?void 0:e.replace("@engineResourcePath/",l.engineResourcePath)}static set defaultUIElementURL(e){this._defaultUIElementURL=e}get singleFrameMode(){if(!this.dce)throw new Error("Need to set 'cameraEnhancer' first.");return this.dce.singleFrameMode}set singleFrameMode(e){if(!this.dce)throw new Error("Need to set 'cameraEnhancer' first.");this.dce.singleFrameMode=e,e&&(()=>{t(this,void 0,void 0,(function*(){let e=yield this.getScanSettings();e.trustFrameCount=1,yield this.updateScanSettings(e)}))})()}_assertOpen(){if(!this.dce)throw new Error("Need to set 'cameraEnhancer' first.");if(!this.dce.isOpen())throw Error("The camera is not open.")}_updateMinLtrSel(e){if(this._minLetter=e,this._optGotMinLtr){const t=e?`${e}+ letters`:"any letter";this._optGotMinLtr.innerText=t,this._selMinLtr&&this._optGotMinLtr.parentNode==this._selMinLtr&&(this._selMinLtr.value="got")}}get soundOnSuccessfullRead(){return this._soundOnSuccessfullRead}set soundOnSuccessfullRead(e){e instanceof HTMLAudioElement?this._soundOnSuccessfullRead=e:this._soundOnSuccessfullRead=new Audio(e)}get whenToPlaySoundforSuccessfulRead(){return!0===this.bPlaySoundOnSuccessfulRead?"frame":this.bPlaySoundOnSuccessfulRead?this.bPlaySoundOnSuccessfulRead:"never"}set whenToPlaySoundforSuccessfulRead(e){this.bPlaySoundOnSuccessfulRead="never"!==e&&e}get whenToVibrateforSuccessfulRead(){return!0===this.bVibrateOnSuccessfulRead?"frame":this.bVibrateOnSuccessfulRead?this.bVibrateOnSuccessfulRead:"never"}set whenToVibrateforSuccessfulRead(e){this.bVibrateOnSuccessfulRead="never"!==e&&e}get cameraEnhancer(){return this.dce}set cameraEnhancer(e){if(n)throw new Error("`cameraEnhancer` is not supported in Node.js.");this.dce=e,this.adjustDCESettings()}adjustDCESettings(){this.dce&&(l._onLog&&l._onLog("adjustDCESettings()"),this.dce.bufferRefreshInterval=200,this.dce.alwaysRefreshBuffer=!1,this.dce.ifSaveOriginalImageInACanvas=this.bSaveOriCanvas,this.dce._singleFrameModeIpt=function(){let e=document.createElement("input");return e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.setAttribute("capture",""),e.addEventListener("change",(()=>t(this,void 0,void 0,(function*(){let t=e.files[0];e.value="",this.onSingleFrameAcquired(t)})))),e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.width="1px",e.style.height="1px",e.style.backgroundColor="transparent",e.style.color="transparent",this._video.parentElement.appendChild(e),e},this.dce.onSingleFrameAcquired=e=>t(this,void 0,void 0,(function*(){let t=yield this.recognize(e);yield this.clearMapDecodeRecord();for(let e of t)for(let t of e.lineResults)t.bUnduplicated&&delete e.bUnduplicated;if(this._drawRegionsults(t),this.onFrameRead&&this.dce.isOpen()&&!this._bPauseScan&&this.onFrameRead(t),this.onUniqueRead&&this.dce.isOpen()&&!this._bPauseScan)for(let e of t)for(let t of e.lineResults)t.bUnduplicated&&this.onUniqueRead(t.text,this._cloneDecodeResults(t));if(this.onMRZRead&&this.dce.isOpen()&&!this._bPauseScan){if(["passportMRZ","visaMRZ","MRZ"].includes(this.currentSettingsTemplate))for(let e of t){let t="",i=0;for(let s of e.lineResults)t.length>0&&(t+="\n"),t+=s.text,s.bUnduplicated&&i++;i>0&&t.length>0&&this.onMRZRead(t,this._cloneDecodeResults(e.lineResults))}}})),this._clickIptSingleFrameMode=this.dce._clickIptSingleFrameMode)}static loadWasm(){return t(this,void 0,void 0,(function*(){if(n&&process.version<"v12")throw new Error("DLRJS SDK requires nodejs version >= v12.");let i,s=this.license,r=JSON.parse(JSON.stringify(this._licenseServer)),o=this._sessionPassword,c=null,d=null,h=0;if(s.startsWith("t")||s.startsWith("f"))h=0;else if(0===s.length||s.startsWith("P")||s.startsWith("L"))h=1;else{h=2;const e=s.indexOf(":");if(-1!=e&&(s=s.substring(e+1)),s.startsWith("DLS2")){let e=s.substring(4);e=n?Buffer.from(e,"base64").toString("binary"):atob(e);const t=JSON.parse(e);if(t.handshakeCode?s=t.handshakeCode:t.organizationID&&(s=t.organizationID),"number"==typeof s&&(s=JSON.stringify(s)),s||(s=""),0===r.length){let e=[];t.mainServerURL&&(e[0]=t.mainServerURL),t.standbyServerURL&&(e[1]=t.standbyServerURL),this.licenseServer=e,r=this.licenseServer}!o&&t.sessionPassword&&(o=t.sessionPassword),t.chargeWay&&(d=t.chargeWay),t.limitedLicenseModules&&(c=t.limitedLicenseModules)}}if(h&&(n?process.version<"v15"&&(i="To use online key requires nodejs version >= v15."):(a.crypto||(i="Please upgrade your browser to support online key."),a.crypto.subtle||(i="Require https to use online key in this browser."))),i){if(1!==h)throw new Error(i);h=0,console.warn(i),this._lastErrorCode=e.EnumDLRErrorCode.UNKNOWN,this._lastErrorString=i}return 1===h&&(s="",console.warn("Applying for a public trial license ...")),yield new Promise(((e,i)=>t(this,void 0,void 0,(function*(){switch(this._loadWasmStatus){case"unload":{l._loadWasmStatus="loading";let e=this.engineResourcePath+this._workerName;if(n||this.engineResourcePath.startsWith(location.origin)||(e=yield fetch(e).then((e=>e.blob())).then((e=>URL.createObjectURL(e)))),n){const t=require("worker_threads");l._dlrWorker=new t.Worker(e)}else l._dlrWorker=new Worker(e);this._dlrWorker.onerror=e=>{l._loadWasmStatus="loadFail";let t=new Error(e.message);this._loadWasmErr=t;for(let e of this._loadWasmCallbackArr)e(t);this._loadWasmCallbackArr=[]},this._dlrWorker.onmessage=e=>t(this,void 0,void 0,(function*(){let t=e.data?e.data:e;switch(t.type){case"log":this._onLog&&this._onLog(t.message);break;case"load":{t.message&&(t.message=t.message.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamsoft-label-recognizer/#javascript)"));let e=!1;if(1===h&&(e=!0),t.success){l._loadWasmStatus="loadSuccess",l._version=t.version+"(JS "+this._jsVersion+"."+this._jsEditVersion+")",this._onLog&&this._onLog("load dlr worker success");for(let e of this._loadWasmCallbackArr)e();this._loadWasmCallbackArr=[],this._dlrWorker.onerror=null,t.message&&console.warn(t.message)}else{let i=new Error(t.message);i.stack=t.stack+"\n"+i.stack,l._loadWasmStatus="loadFail",this._loadWasmErr=i;for(let e of this._loadWasmCallbackArr)e(i);this._loadWasmCallbackArr=[],e||111==t.ltsErrorCode&&-1!=t.message.toLowerCase().indexOf("trial license")&&(e=!0)}e&&this.showDialog(t.success?"warn":"error",t.message);break}case"task":{let e=t.id,i=t.body;try{this._taskCallbackMap.get(e)(i),this._taskCallbackMap.delete(e)}catch(t){throw this._taskCallbackMap.delete(e),t}break}case"event":"resourcesLoadStarted"===t.body.type?l.onResourcesLoadStarted&&setTimeout((()=>l.onResourcesLoadStarted(t.body.resourcesPath)),0):"resourcesLoadProgress"===t.body.type?l.onResourcesLoadProgress&&setTimeout((()=>l.onResourcesLoadProgress(t.body.resourcesPath,{loaded:t.body.loaded,total:t.body.total})),0):"resourcesLoaded"===t.body.type&&l.onResourcesLoaded&&setTimeout((()=>l.onResourcesLoaded(t.body.resourcesPath)),0);break;default:this._onLog&&this._onLog(e)}})),n&&this._dlrWorker.on("message",this._dlrWorker.onmessage),this._dlrWorker.postMessage({type:"loadWasm",bd:this._bWasmDebug,engineResourcePath:this.engineResourcePath,version:this._jsVersion,brtk:!!h,bptk:1===h,lcs:s,dm:!n&&location.origin.startsWith("http")?location.origin:"https://localhost",browserInfo:this.browserInfo,deviceFriendlyName:this.deviceFriendlyName,ls:r,sp:o,lm:c,cw:d})}case"loading":this._loadWasmCallbackArr.push((t=>{t?i(t):e()}));break;case"loadSuccess":e();break;case"loadFail":i(this._loadWasmErr)}}))))}))}static showDialog(e,i){return t(this,void 0,void 0,(function*(){if(!n&&!this._bNeverShowDialog)try{let t=yield fetch(this.engineResourcePath+"dls.license.dialog.html");if(!t.ok)throw Error("Get license dialog fail. Network Error: "+t.statusText);let s=yield t.text();if(!s.trim().startsWith("<"))throw Error("Get license dialog fail. Can't get valid HTMLElement.");let r=document.createElement("div");r.innerHTML=s;let n=[];for(let e=0;e<r.childElementCount;++e){let t=r.children[e];t instanceof HTMLStyleElement&&(n.push(t),document.head.append(t))}let o=1==r.childElementCount?r.children[0]:r;o.remove();let a,l,c,d,h,u=[o],g=o.children;for(let e of g)u.push(e);for(let e=0;e<u.length;++e)for(let t of u[e].children)u.push(t);for(let t of u)if(!a&&t.classList.contains("dls-license-mask"))a=t,t.addEventListener("click",(e=>{if(t==e.target){o.remove();for(let e of n)e.remove()}}));else if(!l&&t.classList.contains("dls-license-icon-close"))l=t,t.addEventListener("click",(()=>{o.remove();for(let e of n)e.remove()}));else if(!c&&t.classList.contains("dls-license-icon-error"))c=t,"error"!=e&&t.remove();else if(!d&&t.classList.contains("dls-license-icon-warn"))d=t,"warn"!=e&&t.remove();else if(!h&&t.classList.contains("dls-license-msg-content")){h=t;let e=i;for(;e;){let i=e.indexOf("["),s=e.indexOf("]",i),r=e.indexOf("(",s),n=e.indexOf(")",r);if(-1==i||-1==s||-1==r||-1==n){t.appendChild(new Text(e));break}i>0&&t.appendChild(new Text(e.substring(0,i)));let o=document.createElement("a"),a=e.substring(i+1,s);o.innerText=a;let l=e.substring(r+1,n);o.setAttribute("href",l),o.setAttribute("target","_blank"),t.appendChild(o),e=e.substring(n+1)}}document.body.appendChild(o)}catch(e){this._onLog&&this._onLog(e.message||e)}}))}static createInstanceInWorker(){return t(this,void 0,void 0,(function*(){return yield this.loadWasm(),yield new Promise(((e,t)=>{let i=this._nextTaskID++;this._taskCallbackMap.set(i,(i=>{if(i.success)return e(i.instanceID);{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),this._dlrWorker.postMessage({type:"createInstance",id:i,bScanner:!1})}))}))}static createInstance(e){return t(this,void 0,void 0,(function*(){let t=new l;return t._instanceID=yield this.createInstanceInWorker(),e&&e.runtimeSettings&&t.updateRuntimeSettingsFromString(e.runtimeSettings),t}))}recognize(i,s){return t(this,void 0,void 0,(function*(){if(l._onLog&&l._onLog("recognize(source: any, modelName?: string)"),l._onLog&&(this._timeStartRecognize=Date.now()),s=s||{},n)return i instanceof Buffer?yield this._recognizeFileInMemory_Uint8Array(new Uint8Array(i),s):i instanceof Uint8Array?yield this._recognizeFileInMemory_Uint8Array(i,s):"string"==typeof i?"data:image/"==i.substring(0,11)?yield this._recognize_Base64(i,s):"http"==i.substring(0,4)?yield this._recognize_Url(i,s):yield this._recognize_FilePath(i,s):yield Promise.reject(TypeError("'_recognize(source, config)': Type of 'source' should be 'Buffer', 'Uint8Array', 'string(base64 with image mime)' or 'string(url)'."));if(i instanceof Blob)return yield this._recognize_Blob(i,s);if(i instanceof ArrayBuffer)return yield this._recognize_ArrayBuffer(i,s);if(i instanceof Uint8Array||i instanceof Uint8ClampedArray)return yield this._recognize_Uint8Array(i,s);if(i instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap)return yield this._recognize_Image(i,s);if(i instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&i instanceof OffscreenCanvas)return yield this._recognize_Canvas(i,s);if(i instanceof HTMLVideoElement)return yield this._recognize_Video(i,s);if("string"==typeof i)return"data:image/"==i.substring(0,11)?yield this._recognize_Base64(i,s):yield this._recognize_Url(i,s);if(i&&"object"==typeof i){const{data:t,canvas:s,region:r,sx:n,sy:o,width:a,height:l}=i;return s&&t?yield this._recognizeBuffer_Uint8Array(t,s.width,s.height,4*s.width,e.EnumDLRImagePixelFormat.IPF_ABGR_8888):t&&a&&l?yield this._recognizeBuffer_Uint8Array(t,a,l,a,e.EnumDLRImagePixelFormat.IPF_GRAYSCALED):yield Promise.reject(TypeError("'_recognize(source, config)': Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'string(base64 with image mime)', 'string(url)' or 'object(dceFrame)'."))}return yield Promise.reject(TypeError("'_recognize(source, config)': Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'string(base64 with image mime)', 'string(url)' or 'object(dceFrame)'."))}))}recognizeBase64String(e,i){return t(this,void 0,void 0,(function*(){let t={};return i&&(t.modelName=i),this._recognize_Base64(e,t)}))}recognizeUrl(e,i){return t(this,void 0,void 0,(function*(){let t={};return i&&(t.modelName=i),this._recognize_Url(e,t)}))}_recognizeBuffer_Uint8Array(e,i,s,r,n,o){return t(this,void 0,void 0,(function*(){return yield new Promise(((t,a)=>{let c=l._nextTaskID++;l._taskCallbackMap.set(c,(e=>{if(e.success){let i,s=l._onLog?Date.now():0;this._lastInnerDecodeDuration=e.duration,this.bufferShared&&!this.bufferShared.length&&(this.bufferShared=e.buffer);try{i=this._handleRetJsonString(e.decodeReturn);const t=e=>!!e&&("VIN_NA"===this.currentSettingsTemplate?this._checkValidVIN(e):"passportMRZ"===this.currentSettingsTemplate?44==e.length&&(/[0-9]/.test(e)?this._checkValidMRP(e):null):"visaMRZ"===this.currentSettingsTemplate?(44==e.length||36==e.length)&&(/[0-9]/.test(e)?this._checkValidMRV(e):null):null);for(let e of i)for(let i of e.lineResults)i.isCheckDigitMatched=t(i.text)}catch(e){return a(e)}if(l._onLog){let e=Date.now();l._onLog("time get result: "+s),l._onLog("Handle image cost: "+(this._timeEnterInnerDLR-this._timeStartRecognize)),l._onLog("worker recognize image cost: "+(s-this._timeEnterInnerDLR)),l._onLog("worker handle results: "+(e-s)),l._onLog("Total recognize image cost: "+(e-this._timeStartRecognize))}return t(i)}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,a(t)}})),l._onLog&&(this._timeEnterInnerDLR=Date.now()),l._onLog&&l._onLog("Send buffer to worker:"+this._timeEnterInnerDLR),l._dlrWorker.postMessage({type:"recognizeByBuffer",id:c,instanceID:this._instanceID,body:{config:o,imageData:{bytes:e,length:s*i*4,width:i,height:s,stride:r,format:n}}},[e.buffer])}))}))}_recognizeBuffer_Blob(e,i,s,r,n,o){return t(this,void 0,void 0,(function*(){l._onLog&&l._onLog("_recognizeBuffer_Blob(buffer,width,height,stride,format)");const t=e.arrayBuffer?yield e.arrayBuffer():yield new Promise(((t,i)=>{let s=new FileReader;s.readAsArrayBuffer(e),s.onload=()=>{t(s.result)},s.onerror=()=>{i(s.error)}}));return yield this._recognizeBuffer_Uint8Array(new Uint8Array(t),i,s,r,n,o)}))}recognizeBuffer(e,i,s,r,o,a){return t(this,void 0,void 0,(function*(){let t;return l._onLog&&l._onLog("recognizeBuffer(buffer,width,height,stride,format)"),l._onLog&&(this._timeStartRecognize=Date.now()),n?e instanceof Uint8Array?t=yield this._recognizeBuffer_Uint8Array(e,i,s,r,o,a):e instanceof Buffer&&(t=yield this._recognizeBuffer_Uint8Array(new Uint8Array(e),i,s,r,o,a)):e instanceof Uint8Array||e instanceof Uint8ClampedArray?t=yield this._recognizeBuffer_Uint8Array(e,i,s,r,o,a):e instanceof ArrayBuffer?t=yield this._recognizeBuffer_Uint8Array(new Uint8Array(e),i,s,r,o,a):e instanceof Blob&&(t=yield this._recognizeBuffer_Blob(e,i,s,r,o,a)),t}))}_recognizeFileInMemory_Uint8Array(e,i){return t(this,void 0,void 0,(function*(){return yield new Promise(((t,s)=>{let r=l._nextTaskID++;l._taskCallbackMap.set(r,(e=>{if(e.success){let i;try{i=this._handleRetJsonString(e.decodeReturn)}catch(e){return s(e)}return t(i)}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,s(t)}})),l._dlrWorker.postMessage({type:"recognizeFileInMemory",id:r,instanceID:this._instanceID,body:{config:i,bytes:e}})}))}))}getRuntimeSettings(){return t(this,void 0,void 0,(function*(){return yield new Promise(((e,t)=>{let i=l._nextTaskID++;l._taskCallbackMap.set(i,(i=>{if(i.success){let t=JSON.parse(i.results);return e(t)}{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),l._dlrWorker.postMessage({type:"getRuntimeSettings",id:i,instanceID:this._instanceID})}))}))}static isRegionNormalPreset(e){return r.LST_MANUAL_SPECIFICATION==e.localizationSourceType&&1==e.regionMeasuredByPercentage&&JSON.stringify([{x:0,y:100},{x:100,y:0},{x:100,y:100},{x:0,y:100}])===JSON.stringify(e.location.points)}updateRuntimeSettings(e){return t(this,void 0,void 0,(function*(){let t;if("string"==typeof e){if(!(e=e.trim()).startsWith("{"))return void this.updateRuntimeSettingsFromString(e);t=JSON.parse(e)}else{if("object"!=typeof e)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");t=JSON.parse(JSON.stringify(e))}const i=t.referenceRegion;l.isRegionNormalPreset(i)?this.region=null:this.region=i,this._updateMinLtrSel(0),yield new Promise(((e,i)=>{let s=l._nextTaskID++;l._taskCallbackMap.set(s,(t=>{if(t.success){try{this._handleRetJsonString(t.updateReturn)}catch(e){i(e)}return e()}{let e=new Error(t.message);return e.stack=t.stack+"\n"+e.stack,i(e)}})),l._dlrWorker.postMessage({type:"updateRuntimeSettings",id:s,instanceID:this._instanceID,body:{settings:JSON.stringify(t)}})}))}))}resetRuntimeSettings(){return t(this,void 0,void 0,(function*(){return this.region=null,this._updateMinLtrSel(0),yield new Promise(((e,t)=>{let i=l._nextTaskID++;l._taskCallbackMap.set(i,(i=>{if(i.success)return e();{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),l._dlrWorker.postMessage({type:"resetRuntimeSettings",id:i,instanceID:this._instanceID})}))}))}updateRuntimeSettingsFromString(e){return t(this,void 0,void 0,(function*(){let t=0;if("string"==typeof e)if((e=e.trim()).startsWith("{"))e=JSON.parse(e);else{if(e.length>50)throw new Error("Error: preset longer than 50 letters.");const i=e.toLowerCase().split("-");if(i.length>2)throw new Error(`Error: '${e}' is not supported.`);if(i.includes("numberletter"))t=3,this.currentSettingsTemplate="numberLetter";else if(i.includes("numberuppercase"))t=3,this.currentSettingsTemplate="numberUppercase";else if(i.includes("number"))t=3,this.currentSettingsTemplate="number";else if(i.includes("letter"))t=3,this.currentSettingsTemplate="letter";else if(i.includes("passportmrz"))t=44,this.currentSettingsTemplate="passportMRZ";else if(i.includes("visamrz"))t=36,this.currentSettingsTemplate="visaMRZ";else if(i.includes("mrz"))t=30,this.currentSettingsTemplate="MRZ";else if(i.includes("vin_na"))t=14,this.currentSettingsTemplate="VIN_NA";else if(i.includes("vin"))t=14,this.currentSettingsTemplate="VIN";else{if(!i.includes("cppdefault"))throw new Error(`Error: '${e}' is not supported.`);this.currentSettingsTemplate="cppdefault"}i.includes("video")?this.region={localizationSourceType:r.LST_MANUAL_SPECIFICATION,location:{points:[{x:0,y:40},{x:100,y:40},{x:100,y:60},{x:0,y:60}]},regionMeasuredByPercentage:1}:this.region=null}else{if("object"!=typeof e)throw TypeError("'updateRuntimeSettingsFromString(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");this.currentSettingsTemplate=null}if("object"==typeof e){const i=e.ReferenceRegionArray[0].Localization,s=i.FirstPoint?{localizationSourceType:r[i.SourceType],location:{points:[{x:i.FirstPoint[0],y:i.FirstPoint[1]},{x:i.SecondPoint[0],y:i.SecondPoint[1]},{x:i.ThirdPoint[0],y:i.ThirdPoint[1]},{x:i.FourthPoint[0],y:i.FourthPoint[1]}]},regionMeasuredByPercentage:i.MeasuredByPercentage}:null;s&&l.isRegionNormalPreset(s)?this.region=null:this.region=s;const n=e.LabelRecognizerParameterArray[0].LineStringLengthRange;t=n?n[0]:0}return this._updateMinLtrSel(t),yield new Promise(((t,i)=>{let s=l._nextTaskID++;l._taskCallbackMap.set(s,(e=>{if(e.success){try{this._handleRetJsonString(e.updateReturn)}catch(e){i(e)}return t()}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,i(t)}})),l._dlrWorker.postMessage({type:"updateRuntimeSettingsFromString",id:s,instanceID:this._instanceID,body:{settings:e}})}))}))}outputRuntimeSettingsToString(){return t(this,void 0,void 0,(function*(){return yield new Promise(((e,t)=>{let i=l._nextTaskID++;l._taskCallbackMap.set(i,(i=>{if(i.success)return e(i.results);{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),l._dlrWorker.postMessage({type:"outputSettingsToString",id:i,instanceID:this._instanceID})}))}))}updateReferenceRegionFromBarcodeResults(e){return t(this,void 0,void 0,(function*(){return yield new Promise(((t,i)=>{let s=l._nextTaskID++;l._taskCallbackMap.set(s,(e=>{if(e.success)return t();{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,i(t)}})),l._dlrWorker.postMessage({type:"updateReferenceRegionFromBarcodeResults",id:s,instanceID:this._instanceID,body:{dbrTextResults:e}})}))}))}static appendCaffeModelBuffer(e,i){return t(this,void 0,void 0,(function*(){return yield new Promise(((t,s)=>{let r=l._nextTaskID++;l._taskCallbackMap.set(r,(e=>{if(e.success){try{return t()}catch(e){s(e)}return t()}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,s(t)}})),l._dlrWorker.postMessage({type:"appendCaffeModelBuffer",id:r,body:{name:e,folderUrl:i}})}))}))}static eraseCaffeModelByName(e){return t(this,void 0,void 0,(function*(){return yield new Promise(((t,i)=>{let s=l._nextTaskID++;l._taskCallbackMap.set(s,(e=>{if(e.success)return t();{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,i(t)}})),l._dlrWorker.postMessage({type:"eraseCaffeModelByName",id:s,body:{name:e}})}))}))}static eraseAllCaffeModels(){return t(this,void 0,void 0,(function*(){return yield new Promise(((e,t)=>{let i=l._nextTaskID++;l._taskCallbackMap.set(i,(i=>{if(i.success)return e();{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),l._dlrWorker.postMessage({type:"eraseAllCaffeModels",id:i})}))}))}_recognize_Blob(e,i){return t(this,void 0,void 0,(function*(){l._onLog&&l._onLog("_recognize_Blob(blob: Blob)");let t=null,s=null;if("undefined"!=typeof createImageBitmap)try{t=yield createImageBitmap(e)}catch(e){}t||(s=yield function(e){return new Promise(((t,i)=>{let s=URL.createObjectURL(e),r=new Image;r.dlrObjUrl=s,r.src=s,r.onload=()=>{t(r)},r.onerror=e=>{i(new Error("Can't convert blob to image : "+(e instanceof Event?e.type:e)))}}))}(e));let r=yield this._recognize_Image(t||s,i);return t&&t.close(),r}))}_recognize_ArrayBuffer(e,i){return t(this,void 0,void 0,(function*(){return yield this._recognize_Blob(new Blob([e]),i)}))}_recognize_Uint8Array(e,i){return t(this,void 0,void 0,(function*(){return yield this._recognize_Blob(new Blob([e]),i)}))}_recognize_Image(e,i){return t(this,void 0,void 0,(function*(){l._onLog&&l._onLog("_recognize_Image(image: HTMLImageElement|ImageBitmap)"),i=i||{};let t,s,r=e instanceof HTMLImageElement?e.naturalWidth:e.width,n=e instanceof HTMLImageElement?e.naturalHeight:e.height,o=Math.max(r,n);if(o>this._canvasMaxWH){let e=this._canvasMaxWH/o;t=Math.round(r*e),s=Math.round(n*e)}else t=r,s=n;let c,d=r,h=n,u=t,g=s;!this.bSaveOriCanvas&&a.OffscreenCanvas?c=new OffscreenCanvas(u,g):(c=document.createElement("canvas"),c.width=u,c.height=g);let _=c.getContext("2d");return r==d&&n==h&&r==u&&n==g?_.drawImage(e,0,0):_.drawImage(e,0,0,d,h,0,0,u,g),e.dlrObjUrl&&URL.revokeObjectURL(e.dlrObjUrl),yield this._recognize_Canvas(c,i)}))}_recognize_Canvas(i,s){return t(this,void 0,void 0,(function*(){if(l._onLog&&l._onLog("_recognize_Canvas(canvas:HTMLCanvasElement)"),i.crossOrigin&&"anonymous"!=i.crossOrigin)throw"cors";if(0===i.width||0===i.height)throw Error("The width or height of the 'canvas' is 0.");(this.bSaveOriCanvas||this.dce&&this.singleFrameMode)&&(this.oriCanvas=i);let t=(i.dlrCtx2d||i.getContext("2d")).getImageData(0,0,i.width,i.height).data;return yield this._recognizeBuffer_Uint8Array(t,i.width,i.height,4*i.width,e.EnumDLRImagePixelFormat.IPF_ABGR_8888,s)}))}_recognize_Video(e,i){return t(this,void 0,void 0,(function*(){if(l._onLog&&l._onLog("_recognize_Video(video)"),!(e instanceof HTMLVideoElement))throw TypeError("'_recognize_Video(video [, config] )': Type of 'video' should be 'HTMLVideoElement'.");if(e.crossOrigin&&"anonymous"!=e.crossOrigin)throw"cors";i=i||{};let t,s,r=e.videoWidth,n=e.videoHeight,o=Math.max(r,n);if(o>this._canvasMaxWH){let e=this._canvasMaxWH/o;t=Math.round(r*e),s=Math.round(n*e)}else t=r,s=n;let c=r,d=n,h=t,u=s,g=r==c&&n==d&&r==h&&n==u,_=null;!this.bSaveOriCanvas&&a.OffscreenCanvas?_=new OffscreenCanvas(h,u):(_=document.createElement("canvas"),_.width=h,_.height=u);const f=_.dlrCtx2d=_.getContext("2d");return g?f.drawImage(e,0,0):f.drawImage(e,0,0,c,d,0,0,h,u),yield this._recognize_Canvas(_,i)}))}_recognize_Base64(e,i){return t(this,void 0,void 0,(function*(){if(l._onLog&&l._onLog("_recognize_Base64(base64Str)"),"string"!=typeof e&&"object"!=typeof e)return Promise.reject("'_recognize_Base64(base64Str, config)': Type of 'base64Str' should be 'string'.");if("data:image/"==e.substring(0,11)&&(e=e.substring(e.indexOf(",")+1)),n){let t=Buffer.from(e,"base64");return yield this._recognizeFileInMemory_Uint8Array(new Uint8Array(t),i)}{let t=atob(e),s=t.length,r=new Uint8Array(s);for(;s--;)r[s]=t.charCodeAt(s);return yield this._recognize_Blob(new Blob([r]),i)}}))}_recognize_Url(e,i){return t(this,void 0,void 0,(function*(){if(l._onLog&&l._onLog("_recognize_Url(url)"),"string"!=typeof e&&"object"!=typeof e)throw TypeError("'_recognize_Url(url, config)': Type of 'url' should be 'string'.");if(n){let t=yield new Promise(((t,i)=>{(e.startsWith("https")?require("https"):require("http")).get(e,(e=>{if(200==e.statusCode){let i=[];e.on("data",(e=>{i.push(e)})).on("end",(()=>{t(new Uint8Array(Buffer.concat(i)))}))}else i("http get fail, statusCode: "+e.statusCode)}))}));return yield this._recognizeFileInMemory_Uint8Array(t,i)}{let s=yield new Promise(((i,s)=>{let r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.send(),r.onloadend=()=>t(this,void 0,void 0,(function*(){i(r.response)})),r.onerror=()=>{s(new Error("Network Error: "+r.statusText))}}));return yield this._recognize_Blob(s,i)}}))}_recognize_FilePath(e,i){return t(this,void 0,void 0,(function*(){if(l._onLog&&l._onLog("_recognize_FilePath(path)"),!n)throw Error("'_recognize_FilePath(path, config)': The method is only supported in node environment.");if("string"!=typeof e&&"object"!=typeof e)throw TypeError("'_recognize_FilePath(path, config)': Type of 'path' should be 'string'.");const t=require("fs");let s=yield new Promise(((i,s)=>{t.readFile(e,((e,t)=>{e?s(e):i(new Uint8Array(t))}))}));return yield this._recognizeFileInMemory_Uint8Array(s,i)}))}static LabelRecognizerException(t,i){let s,r=e.EnumDLRErrorCode.UNKNOWN;return"number"==typeof t?(r=t,s=new Error(i)):s=new Error(t),s.code=r,s}_handleRetJsonString(t){let i=e.EnumDLRErrorCode;if(t.results){const i=this.drawRegionsultRecords,s={};for(let e=0;e<t.results.length;e++){let r=t.results[e];if(null!=r.exception){this._setWarnnedEx.has(r.exception)||(this._setWarnnedEx.add(r.exception),console.warn(r.exception));let e={};r.exception.split(";").forEach((t=>{let i=t.indexOf(":");e[t.substring(0,i)]=t.substring(i+1)})),r.exception=e}for(let e of r.lineResults){const t=e.text;if(s[t]=1,e.bUnduplicated){(i[t]=i[t]||[]).push(e)}else i[t]&&(i[t]=[e])}}if(t.records){const e=this.recognizeRecords=t.records;for(let t in i)e[t]||delete i[t];for(let e in i)s[e]||(i[e]=[])}else this.recognizeRecords={},this.drawRegionsultRecords={};return this._lastErrorCode=t.exception,this._lastErrorString=t.description,t.exception&&!this._setWarnnedEx.has(t.description)&&(this._setWarnnedEx.add(t.description),t.exception==e.EnumDLRErrorCode.LICENSE_INVALID||t.exception==e.EnumDLRErrorCode.LICENSE_EXPIRED?console.error(t.description):console.warn(t.description)),t.results}if(t.exception==i.OK)return t.data;throw l.LabelRecognizerException(t.exception,t.description)}setModeArgument(e,i,s,r){return t(this,void 0,void 0,(function*(){return yield new Promise(((t,n)=>{let o=l._nextTaskID++;l._taskCallbackMap.set(o,(e=>{if(e.success){try{this._handleRetJsonString(e.setReturn)}catch(e){return n(e)}return t()}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,n(t)}})),l._dlrWorker.postMessage({type:"setModeArgument",id:o,instanceID:this._instanceID,body:{modeName:e,index:i,argumentName:s,argumentValue:r}})}))}))}getModeArgument(e,i,s){return t(this,void 0,void 0,(function*(){return yield new Promise(((t,r)=>{let n=l._nextTaskID++;l._taskCallbackMap.set(n,(e=>{if(e.success){let i;try{i=this._handleRetJsonString(e.getReturn)}catch(e){return r(e)}return t(i)}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,r(t)}})),l._dlrWorker.postMessage({type:"getModeArgument",id:n,instanceID:this._instanceID,body:{modeName:e,index:i,argumentName:s}})}))}))}recognizeCurrentFrame(){return t(this,void 0,void 0,(function*(){this._assertOpen();let t=this.dce.getFrame();if(t&&null===t.canvas){let{data:i,width:s,height:r}=t;return yield this._recognizeBuffer_Uint8Array(i,s,r,s,e.EnumDLRImagePixelFormat.IPF_GRAYSCALED)}if(t&&t.canvas){let{data:i,canvas:s}=t;return(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=s),yield this._recognizeBuffer_Uint8Array(i,s.width,s.height,4*s.width,e.EnumDLRImagePixelFormat.IPF_ABGR_8888)}}))}clearMapDecodeRecord(){return t(this,void 0,void 0,(function*(){return yield new Promise(((e,t)=>{let i=l._nextTaskID++;l._taskCallbackMap.set(i,(i=>{if(i.success)return e();{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),l._dlrWorker.postMessage({type:"clearMapDecodeRecord",id:i,instanceID:this._instanceID})}))}))}_bindUI(){const e=this.dce.getUIElement();if(!e)throw new Error("Need to define `UIElement` before opening.");this.dce._bindUI();let t=[e],i=e.children;for(let e of i)t.push(e);for(let e=0;e<t.length;++e)for(let i of t[e].children)t.push(i);for(let e of t)!this._cvsDrawArea&&e.classList.contains("dlr-cvs-drawarea")?this._cvsDrawArea=e:!this._divScanArea&&e.classList.contains("dlr-cvs-scanarea")?this._divScanArea=e:!this._divScanLight&&e.classList.contains("dlr-scanlight")?this._divScanLight=e:!this._selCam&&e.classList.contains("dce-sel-camera")?this._selCam=e:!this._selRsl&&e.classList.contains("dce-sel-resolution")?this._selRsl=e:!this._selMinLtr&&e.classList.contains("dlr-sel-minletter")?(this._selMinLtr=e,this._selMinLtr.options.length||(this._selMinLtr.innerHTML=[this._optGotMinLtr?"":'<option class="dlr-opt-gotMinLtr" value="got"></option>','<option value="0" selected>any letter</option>','<option value="3">3+ letters</option>','<option value="5">5+ letters</option>','<option value="8">8+ letters</option>','<option value="12">12+ letters</option>','<option value="18">18+ letters</option>','<option value="30">30+ letters</option>','<option value="50">50+ letters</option>','<option value="80">80+ letters</option>','<option value="120">120+ letters</option>'].join(""),this._optGotMinLtr=this._optGotMinLtr||this._selMinLtr.options[0])):this._optGotMinLtr||!e.classList.contains("dlr-opt-gotMinLtr")&&!e.classList.contains("dlr-opt-gotMinLtr")?!this._btnClose&&e.classList.contains("dce-btn-close")&&(this._btnClose=e):this._optGotMinLtr=e;if(this.singleFrameMode&&(this._cvsDrawArea&&(this._cvsDrawArea.addEventListener("click",this._clickIptSingleFrameMode),this._cvsDrawArea.style.cursor="pointer",this._cvsDrawArea.setAttribute("title","Take a photo")),this._divScanArea&&(this._divScanArea.addEventListener("click",this._clickIptSingleFrameMode),this._divScanArea.style.cursor="pointer",this._divScanArea.setAttribute("title","Take a photo"))),this._selCam&&this._selCam.addEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.addEventListener("change",this._onResolutionSelChange),this._selMinLtr&&this._selMinLtr.addEventListener("change",this._onMinLetterSelChange),this._btnClose&&this._btnClose.addEventListener("click",this._onCloseBtnClick),!this.dce.video)throw this._unbindUI(),Error("Can not find HTMLVideoElement with class `dce-video`.");this._updateMinLtrSel(this._minLetter)}_unbindUI(){this._clearRegionsults(),this.singleFrameMode&&(this._cvsDrawArea&&(this._cvsDrawArea.removeEventListener("click",this._clickIptSingleFrameMode),this._cvsDrawArea.style.cursor="",this._cvsDrawArea.removeAttribute("title")),this._divScanArea&&(this._divScanArea.removeEventListener("click",this._clickIptSingleFrameMode),this._divScanArea.style.cursor="",this._divScanArea.removeAttribute("title"))),this._selCam&&this._selCam.removeEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.removeEventListener("change",this._onResolutionSelChange),this._selMinLtr&&this._selMinLtr.removeEventListener("change",this._onMinLetterSelChange),this._btnClose&&this._btnClose.removeEventListener("click",this._onCloseBtnClick),this.dce._unbindUI(),this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._selCam=null,this._selRsl=null,this._selMinLtr=null,this._optGotMinLtr=null,this._btnClose=null}getScanSettings(){return t(this,void 0,void 0,(function*(){return yield new Promise(((e,t)=>{let i=l._nextTaskID++;l._taskCallbackMap.set(i,(i=>{if(i.success){let t=i.results;return t.intervalTime=this.intervalTime,e(t)}{let e=new Error(i.message);return e.stack+="\n"+i.stack,t(e)}})),l._dlrWorker.postMessage({type:"getScanSettings",id:i,instanceID:this._instanceID})}))}))}updateScanSettings(e){return t(this,void 0,void 0,(function*(){return this.intervalTime=e.intervalTime,yield new Promise(((t,i)=>{let s=l._nextTaskID++;l._taskCallbackMap.set(s,(e=>{if(e.success)return t();{let t=new Error(e.message);return t.stack+="\n"+e.stack,i(t)}})),l._dlrWorker.postMessage({type:"updateScanSettings",id:s,instanceID:this._instanceID,body:{settings:e}})}))}))}_show(){const e=this.dce.getUIElement();e.parentNode||(e.style.position="fixed",e.style.left="0",e.style.top="0",document.body.append(e)),"none"==e.style.display&&(e.style.display="")}stop(){this.dce&&this.dce.stop(),this._divScanLight&&(this._divScanLight.style.display="none"),this._drawRegionsults(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}_cloneDecodeResults(e){if(e instanceof Array){let t=[];for(let i of e)t.push(this._cloneDecodeResults(i));return t}{let t=e;return JSON.parse(JSON.stringify(t,((e,t)=>"oriVideoCanvas"==e||"searchRegionCanvas"==e?void 0:t)))}}_loopReadVideo(){return t(this,void 0,void 0,(function*(){if(this.bDestroyed)return void(this.dce&&this.dce.stopFetchingLoop());if(!this.dce||!this.dce.isOpen())return this.dce&&this.dce.stopFetchingLoop(),void(yield this.clearMapDecodeRecord());if(!this.dce.video||this.dce.video.paused||this._bPauseScan)return l._onLog&&l._onLog("Video or scan is paused. Ask in 1s."),this.dce&&this.dce.stopFetchingLoop(),yield this.clearMapDecodeRecord(),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),this._intervalDetectVideoPause));this._divScanLight&&"none"==this._divScanLight.style.display&&(this._divScanLight.style.display=""),l._onLog&&l._onLog("======= once read ======="),l._onLog&&(this._timeStartRecognize=Date.now());let i=this._getVideoFrame();if(!i)return this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),0));(()=>t(this,void 0,void 0,(function*(){if(i&&null===i.canvas){let{data:t,width:s,height:r,timeStamp:n}=i,o={timeStamp:n,bScanner:!0};return yield this._recognizeBuffer_Uint8Array(t,s,r,s,e.EnumDLRImagePixelFormat.IPF_GRAYSCALED,o)}if(i&&i.canvas){let{data:t,canvas:s,region:r,sx:n,sy:o,width:a,height:l,timeStamp:c}=i,d={timeStamp:c,bScanner:!0};return(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=s),yield this._recognizeBuffer_Uint8Array(t,s.width,s.height,4*s.width,e.EnumDLRImagePixelFormat.IPF_ABGR_8888,d)}{let e=new Error("imgData is empty.");return new Promise((t=>t(e)))}})))().then((e=>{l._onLog&&l._onLog(e);let t=this.array_decodeFrameTimeCost,i=this.array_getFrameTimeCost;if((()=>{for(;t.length>=5;)t.shift();t.push(this._lastInnerDecodeDuration)})(),this._intervalGetVideoFrame=(()=>{let e=0;if(i&&i.length){let s=Math.min(...t),r=Math.max(...i);s&&r&&(e=s-r)}else e=0;return e>0?e:0})(),this.dce&&this.dce.isOpen()&&this.dce.video&&!this.dce.video.paused&&!this._bPauseScan){if(this.bPlaySoundOnSuccessfulRead&&e.length){let t=!1;if(!0===this.bPlaySoundOnSuccessfulRead||"frame"===this.bPlaySoundOnSuccessfulRead)t=!0;else if("unique"===this.bPlaySoundOnSuccessfulRead)for(let i of e)for(let e of i.lineResults)if(e.bUnduplicated){t=!0;break}t&&(this.soundOnSuccessfullRead.currentTime=0,this.soundOnSuccessfullRead.play().catch((e=>{console.warn("Autoplay not allowed. User interaction required.")})))}if(navigator.vibrate&&this.bVibrateOnSuccessfulRead&&e.length){let t=!1;if(!0===this.bVibrateOnSuccessfulRead||"frame"===this.bVibrateOnSuccessfulRead)t=!0;else if("unique"===this.bVibrateOnSuccessfulRead)for(let i of e)for(let e of i.lineResults)if(e.bUnduplicated){t=!0;break}if(t)try{navigator.vibrate(this.vibrateDuration)}catch(e){console.warn("Vibration not allowed. User interaction required: "+(e.message||e))}}if(this.onFrameRead){let t=this._cloneDecodeResults(e);for(let e of t)for(let t of e.lineResults)t.bUnduplicated&&delete e.bUnduplicated;this.onFrameRead(t)}if(this.onUniqueRead)for(let t of e)for(let e of t.lineResults)e.bUnduplicated&&this.onUniqueRead(e.text,this._cloneDecodeResults(e));if(this.onMRZRead){if(["passportMRZ","visaMRZ","MRZ"].includes(this.currentSettingsTemplate))for(let t of e){let e="",i=0;for(let s of t.lineResults)e.length>0&&(e+="\n"),e+=s.text,s.bUnduplicated&&i++;i>0&&e.length>0&&this.onMRZRead(e,this._cloneDecodeResults(t.lineResults))}}{const e=[];for(let t in this.drawRegionsultRecords)e.push(...this.drawRegionsultRecords[t]);this._drawRegionsults([{lineResults:e}])}}this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.intervalTime?this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),this.intervalTime):this._loopReadVideo()})).catch((e=>{this.dce.stopFetchingLoop(),l._onLog&&l._onLog(e.message||e),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout((()=>{this._loopReadVideo()}),Math.max(this.intervalTime,1e3)),"platform error"==e.message||console.warn(e.message)}))}))}_getVideoFrame(){let e=this.dce.isFetchingLoopStarted();if(this.dce.loopInterval=this._intervalGetVideoFrame,e||this.dce.startFetchingLoop(),!this.dce.getQueueLength())return this.dce.loopInterval=0,null;let t=this.dce.getFrameFromBuffer();return(e=>{let t=e.timeSpent,i=this.array_getFrameTimeCost;for(;i.length>=5;)i.shift();i.push(t)})(t),t}_checkValidVIN(e){if(!e||17!=e.length)return!1;const t=(e=>{const t=new Map([["A",1],["B",2],["C",3],["D",4],["E",5],["F",6],["G",7],["H",8],["J",1],["K",2],["L",3],["M",4],["N",5],["P",7],["R",9],["S",2],["T",3],["U",4],["V",5],["W",6],["X",7],["Y",8],["Z",9],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9]]),i=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2];let s=0;for(let r=0;r<e.length;r++){let n=t.get(e[r]);n&&(s+=n*i[r])}return s%11})(e);return t.toString()===e[8]}_checkValidMRP(e){if(!e||44!=e.length)return!1;const t=(e,t,i)=>{const s=new Map([["<",0],["0",0],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9],["A",10],["B",11],["C",12],["D",13],["E",14],["F",15],["G",16],["H",17],["I",18],["J",19],["K",20],["L",21],["M",22],["N",23],["O",24],["P",25],["Q",26],["R",27],["S",28],["T",29],["U",30],["V",31],["W",32],["X",33],["Y",34],["Z",35]]),r=[7,3,1];let n=0;for(let o=t,a=0;o<=i;o++){let t=s.get(e[o]);t&&(n+=t*r[a%3]),a++}return n%10},i=e.slice(0,10)+e.slice(13,20)+e.slice(21,43),s=t(e,0,8).toString(),r=t(e,13,18).toString(),n=t(e,21,26).toString(),o=t(e,28,41).toString(),a=t(i,0,i.length).toString();return s===e[9]&&r===e[19]&&n===e[27]&&o===e[42]&&a===e[43]}_checkValidMRV(e){if(!e||44!=e.length&&36!=e.length)return!1;const t=(e,t,i)=>{const s=new Map([["<",0],["0",0],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9],["A",10],["B",11],["C",12],["D",13],["E",14],["F",15],["G",16],["H",17],["I",18],["J",19],["K",20],["L",21],["M",22],["N",23],["O",24],["P",25],["Q",26],["R",27],["S",28],["T",29],["U",30],["V",31],["W",32],["X",33],["Y",34],["Z",35]]),r=[7,3,1];let n=0;for(let o=t,a=0;o<=i;o++){let t=s.get(e[o]);t&&(n+=t*r[a%3]),a++}return n%10},i=t(e,0,8).toString(),s=t(e,13,18).toString(),r=t(e,21,26).toString();return i===e[9]&&s===e[19]&&r===e[27]}_drawRegionsults(e){let t,i,s;if(this.beingLazyDrawRegionsults=!1,this.singleFrameMode){if(!this.oriCanvas)return;t="contain",i=this.oriCanvas.width,s=this.oriCanvas.height}else{if(!this.dce.video)return;t=this.dce.video.style.objectFit||"contain",i=this.dce.video.videoWidth,s=this.dce.video.videoHeight}if(i<=0||i<=0)return;let n,o,a,l,c,d,h,u,g=this.region;if(g)if(r.LST_MANUAL_SPECIFICATION!=g.localizationSourceType)g=null;else if(g.regionMeasuredByPercentage){let e=g.location.points;if(0==e[0].x&&0==e[0].y&&100==e[1].x&&0==e[1].y&&100==e[2].x&&100==e[2].y&&0==e[3].x&&100==e[3].y)g=null;else{g={location:{points:[]}};for(let t=0;t<4;++t)g.location.points.push({x:Math.round(e[t].x/100*i),y:Math.round(e[t].y/100*s)})}}else g=JSON.parse(JSON.stringify(g)),delete g.regionMeasuredByPercentage;if(g){let e=g.location.points;n=e[0].x,c=e[0].y,o=e[1].x,d=e[1].y,a=e[2].x,h=e[2].y,l=e[3].x,u=e[3].y}if(this._cvsDrawArea){this._cvsDrawArea.style.objectFit=t;let r=this._cvsDrawArea;r.width=i,r.height=s;let _=r.getContext("2d");if(g){_.fillStyle=this.regionMaskFillStyle,_.fillRect(0,0,r.width,r.height);let e=Math.round(this.regionMaskLineWidth/2),t=(t,i,s,r,n,o)=>(-(s-t)*e/Math.hypot(s-t,r-i)-(n-t)*e/Math.hypot(n-t,o-i))/2+t,i=(t,i,s,r,n,o)=>(-(r-i)*e/Math.hypot(s-t,r-i)-(o-i)*e/Math.hypot(n-t,o-i))/2+i;_.globalCompositeOperation="destination-out",_.fillStyle="#000",_.beginPath(),_.moveTo(t(n,c,o,d,l,u),i(n,c,o,d,l,u)),_.lineTo(t(o,d,n,c,a,h),i(o,d,n,c,a,h)),_.lineTo(t(a,h,o,d,l,u),i(a,h,o,d,l,u)),_.lineTo(t(l,u,a,h,n,c),i(l,u,a,h,n,c)),_.fill(),_.globalCompositeOperation="source-over",_.strokeStyle=this.regionMaskStrokeStyle,_.lineWidth=this.regionMaskLineWidth,_.beginPath(),_.moveTo(n,c),_.lineTo(o,d),_.lineTo(a,h),_.lineTo(l,u),_.closePath(),_.stroke()}if(e){_.globalCompositeOperation="destination-over",_.fillStyle=this.highlightFillStyle,_.strokeStyle=this.highlightStrokeStyle,_.lineWidth=this.highlightLineWidth,e=e||[];for(let t of e)for(let e of t.lineResults){let t=e.location.points;_.beginPath(),_.moveTo(t[0].x,t[0].y),_.lineTo(t[1].x,t[1].y),_.lineTo(t[2].x,t[2].y),_.lineTo(t[3].x,t[3].y),_.fill(),_.beginPath(),_.moveTo(t[0].x,t[0].y),_.lineTo(t[1].x,t[1].y),_.lineTo(t[2].x,t[2].y),_.lineTo(t[3].x,t[3].y),_.closePath(),_.stroke()}}this.singleFrameMode&&(_.globalCompositeOperation="destination-over",_.drawImage(this.oriCanvas,0,0))}if(this._divScanArea&&this.dce.video){let e=this.dce.video.offsetWidth,t=this.dce.video.offsetHeight,r=1;e/t<i/s?(r=e/i,this._divScanArea.style.left="0",this._divScanArea.style.top=Math.round((t-s*r)/2)+"px"):(r=t/s,this._divScanArea.style.left=Math.round((e-i*r)/2)+"px",this._divScanArea.style.top="0");let _=g?Math.round(Math.min(n,o,a,l)*r):0,f=g?Math.round(Math.min(c,d,h,u)*r):0,m=g?Math.round(Math.max(n,o,a,l)*r-_):Math.round(i*r),p=g?Math.round(Math.max(c,d,h,u)*r-f):Math.round(s*r);this._divScanArea.style.marginLeft=_+"px",this._divScanArea.style.marginTop=f+"px",this._divScanArea.style.width=m+"px",this._divScanArea.style.height=p+"px"}}_clearRegionsults(){this._cvsDrawArea&&(this._cvsDrawArea.width=this._cvsDrawArea.height=0)}startScanning(e){return t(this,void 0,void 0,(function*(){if("closed"!=this._tempSolutionStatus)return;if(this._tempSolutionStatus="opening",!this.dce)throw new Error("Need to set 'cameraEnhancer' first.");if("opening"!=this._tempSolutionStatus)return;this._bindUI(),e&&this._show();let t=yield this.dce.play();return"opening"==this._tempSolutionStatus?(this._bPauseScan=!1,this.singleFrameMode||(this._loopReadVideo(),this._drawRegionsults()),this._tempSolutionStatus="opened",t):void 0}))}stopScanning(e){this.stop(),this._unbindUI(),this.dce&&this.dce.stopFetchingLoop(),this._bPauseScan=!0,e&&this.dce&&(this.dce.getUIElement().style.display="none"),this._tempSolutionStatus="closed"}pauseScanning(){this.dce&&this.dce.stopFetchingLoop(),this._bPauseScan=!0,this._clearRegionsults(),this._divScanLight&&(this._divScanLight.style.display="none")}resumeScanning(){this._assertOpen(),this._bPauseScan=!1}destroyContext(){if(!this.bDestroyed)return l._onLog&&l._onLog("destroy()"),this.bDestroyed=!0,(this.dce||"opening"===this._tempSolutionStatus)&&this.stopScanning(),new Promise(((e,t)=>{let i=l._nextTaskID++;l._taskCallbackMap.set(i,(i=>{if(i.success)return e();{let e=new Error(i.message);return e.stack=i.stack+"\n"+e.stack,t(e)}})),l._dlrWorker.postMessage({type:"destroy",id:i,instanceID:this._instanceID})}))}}var c,d;l._jsVersion="2.2.2",l._jsEditVersion="20220302",l._version="loading...(JS "+l._jsVersion+"."+l._jsEditVersion+")",l._license=n||o||!document.currentScript?"":document.currentScript.getAttribute("data-license")||"",l._sessionPassword=n||o||!document.currentScript?"":document.currentScript.getAttribute("data-sessionPassword")||"",l.browserInfo=function(){if(!n&&!o){var e={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",this.OS=this.searchString(this.dataOS)||"unknownOS","Linux"==this.OS&&-1!=navigator.userAgent.indexOf("Windows NT")&&(this.OS="HarmonyOS")},searchString:function(e){for(var t=0;t<e.length;t++){var i=e[t].string,s=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,i){if(-1!=i.indexOf(e[t].subString))return e[t].identity}else if(s)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"OPR",identity:"OPR"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],dataOS:[{string:navigator.userAgent,subString:"HarmonyOS",identity:"HarmonyOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};return e.init(),{browser:e.browser,version:e.version,OS:e.OS}}if(o)return{browser:"ssr",version:0,OS:"ssr"};if(n){const e={browser:"node",version:process.version.substring(1),OS:"loading"};return(()=>{t(this,void 0,void 0,(function*(){const t=yield import("os");e.OS=t&&t.platform?t.platform()+t.release():"Unknown"}))})(),e}}(),l._workerName="dlr-"+l._jsVersion+".worker.js",l._engineResourcePath=(()=>{if(n)return __dirname+"/";if(!o&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"})(),l._licenseServer=[],l._deviceFriendlyName="",l._isShowRelRecognizeTimeInResults=!1,l._bWasmDebug=!1,l._bNeverShowDialog=!1,l._nextTaskID=0,l._taskCallbackMap=new Map,l._loadWasmStatus="unload",l._loadWasmCallbackArr=[],l.onResourcesLoadStarted=null,l.onResourcesLoadProgress=null,l.onResourcesLoaded=null,l._lastErrorCode=0,l._lastErrorString="",l._defaultUIElementURL="@engineResourcePath/dlr.ui.html",l._loadWasmErr=null,e.EnumDLRGrayscaleTransformationMode=void 0,(c=e.EnumDLRGrayscaleTransformationMode||(e.EnumDLRGrayscaleTransformationMode={}))[c.GTM_INVERTED=1]="GTM_INVERTED",c[c.GTM_ORIGINAL=2]="GTM_ORIGINAL",c[c.GTM_AUTO=4]="GTM_AUTO",c[c.GTM_REV=2147483648]="GTM_REV",c[c.GTM_SKIP=0]="GTM_SKIP",e.EnumDLRRegionPredetectionMode=void 0,(d=e.EnumDLRRegionPredetectionMode||(e.EnumDLRRegionPredetectionMode={}))[d.RPM_AUTO=1]="RPM_AUTO",d[d.RPM_GENERAL=2]="RPM_GENERAL",d[d.RPM_GENERAL_RGB_CONTRAST=4]="RPM_GENERAL_RGB_CONTRAST",d[d.RPM_GENERAL_GRAY_CONTRAST=8]="RPM_GENERAL_GRAY_CONTRAST",d[d.RPM_GENERAL_HSV_CONTRAST=16]="RPM_GENERAL_HSV_CONTRAST",d[d.RPM_REV=2147483648]="RPM_REV",d[d.RPM_SKIP=0]="RPM_SKIP",e.LabelRecognizer=l,Object.defineProperty(e,"__esModule",{value:!0})}));
