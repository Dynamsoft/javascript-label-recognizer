/*!
 * Dynamsoft JavaScript Library
 * @product Dynamsoft Label Recognizer JS Edition
 * @website http://www.dynamsoft.com
 * @copyright Copyright 2022, Dynamsoft Corporation
 * @author Dynamsoft
 * @version 2.2.11 (js 20220808)
 * @fileoverview Dynamsoft JavaScript Library for Label Recognizer
 * More info on DLR JS: https://www.dynamsoft.com/label-recognizer/sdk-javascript/
 */
!function(){"use strict";const e="undefined"==typeof self,t=e?{}:self,r=e=>e&&"object"==typeof e&&"function"==typeof e.then;class n extends Promise{constructor(e){let t,n;super(((e,r)=>{t=e,n=r})),this._s="pending",this.resolve=e=>{this.isPending&&(r(e)?this.task=e:(this._s="fulfilled",t(e)))},this.reject=e=>{this.isPending&&(this._s="rejected",n(e))},this.task=e}get status(){return this._s}get isPending(){return"pending"===this._s}get isFulfilled(){return"fulfilled"===this._s}get isRejected(){return"rejected"===this._s}get task(){return this._task}set task(e){let t;this._task=e,r(e)?t=e:"function"==typeof e&&(t=new Promise(e)),t&&(async()=>{try{const r=await t;e===this._task&&this.resolve(r)}catch(t){e===this._task&&this.reject(t)}})()}get isEmpty(){return null==this._task}}let a,o,i,s,c;if("undefined"!=typeof navigator&&(a=navigator,o=a.userAgent,i=a.platform,s=a.mediaDevices),!e){const e={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(o)||this.searchVersion(a.appVersion)||0,this.OS=this.searchString(this.dataOS)||"unknownOS","Linux"==this.OS&&-1!=o.indexOf("Windows NT")&&(this.OS="HarmonyOS")},searchString:function(e){for(let t=0;t<e.length;t++){let r=e[t].string,n=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,r){if(-1!=r.indexOf(e[t].subString))return e[t].identity}else if(n)return e[t].identity}},searchVersion:function(e){let t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:o,subString:"Edge",identity:"Edge"},{string:o,subString:"OPR",identity:"OPR"},{string:o,subString:"Chrome",identity:"Chrome"},{string:a.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:o,subString:"Firefox",identity:"Firefox"},{string:o,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],dataOS:[{string:o,subString:"HarmonyOS",identity:"HarmonyOS"},{string:o,subString:"Android",identity:"Android"},{string:o,subString:"iPhone",identity:"iPhone"},{string:i,subString:"Win",identity:"Windows"},{string:i,subString:"Mac",identity:"Mac"},{string:i,subString:"Linux",identity:"Linux"}]};e.init(),c={browser:e.browser,version:e.version,OS:e.OS}}e&&(c={browser:"ssr",version:0,OS:"ssr"}),"undefined"!=typeof WebAssembly&&o&&(!/Safari/.test(o)||/Chrome/.test(o)||/\(.+\s11_2_([2-6]).*\)/.test(o)),s&&s.getUserMedia;const d="Chrome"===c.browser&&c.version>66||"Safari"===c.browser&&c.version>13||"OPR"===c.browser&&c.version>43||"Edge"===c.browser&&c.version>15;var l=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function u(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}function f(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function g(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function h(e){return"string"!=typeof e&&(console.warn(`${e} used as a key, but it is not a string.`),e=String(e)),e}function m(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}const y="local-forage-detect-blob-support";let p;const b={},v=Object.prototype.toString,A="readonly",w="readwrite";function S(e){return"boolean"==typeof p?Promise.resolve(p):function(e){return new Promise((function(t){var r=e.transaction(y,w),n=u([""]);r.objectStore(y).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return p=e,p}))}function M(e){var t=b[e.name],r={};r.promise=new Promise((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function x(e){var t=b[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function _(e,t){var r=b[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function k(e,t){return new Promise((function(r,n){if(b[e.name]=b[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);M(e),e.db.close()}var a=[e.name];t&&a.push(e.version);var o=l.open.apply(l,a);t&&(o.onupgradeneeded=function(t){var r=o.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(y)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),n(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},r(t),x(e)}}))}function L(e){return k(e,!1)}function C(e){return k(e,!0)}function N(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,a=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||r){if(r){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function R(e){var t=function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),a=0;a<t;a++)n[a]=e.charCodeAt(a);return r}(atob(e.data));return u([t],{type:e.type})}function T(e){var t=this,r=t._initReady().then((function(){var e=b[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return g(r,e,e),r}function I(e,t,r,n){void 0===n&&(n=1);try{var a=e.db.transaction(e.storeName,t);r(null,a)}catch(a){if(n>0&&(!e.db||"InvalidStateError"===a.name||"NotFoundError"===a.name))return Promise.resolve().then((()=>{if(!e.db||"NotFoundError"===a.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),C(e)})).then((()=>function(e){M(e);for(var t=b[e.name],r=t.forages,n=0;n<r.length;n++){const e=r[n];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return e.db=null,L(e).then((t=>(e.db=t,N(e)?C(e):t))).then((n=>{e.db=t.db=n;for(var a=0;a<r.length;a++)r[a]._dbInfo.db=n})).catch((t=>{throw _(e,t),t}))}(e).then((function(){I(e,t,r,n-1)})))).catch(r);r(a)}}var P={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var a=b[r.name];a||(a={forages:[],db:null,dbReady:null,deferredOperations:[]},b[r.name]=a),a.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=T);var o=[];function i(){return Promise.resolve()}for(var s=0;s<a.forages.length;s++){var c=a.forages[s];c!==t&&o.push(c._initReady().catch(i))}var d=a.forages.slice(0);return Promise.all(o).then((function(){return r.db=a.db,L(r)})).then((function(e){return r.db=e,N(r,t._defaultConfig.version)?C(r):e})).then((function(e){r.db=a.db=e,t._dbInfo=r;for(var n=0;n<d.length;n++){var o=d[n];o!==t&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}}))},_support:function(){try{if(!l||!l.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),getItem:function(e,t){var r=this;e=h(e);var n=new Promise((function(t,n){r.ready().then((function(){I(r._dbInfo,A,(function(a,o){if(a)return n(a);try{var i=o.objectStore(r._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),function(e){return e&&e.__local_forage_encoded_blob}(e)&&(e=R(e)),t(e)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return f(n,t),n},setItem:function(e,t,r){var n=this;e=h(e);var a=new Promise((function(r,a){var o;n.ready().then((function(){return o=n._dbInfo,"[object Blob]"===v.call(t)?S(o.db).then((function(e){return e?t:(r=t,new Promise((function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)})));var r})):t})).then((function(t){I(n._dbInfo,w,(function(o,i){if(o)return a(o);try{var s=i.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),r(t)},i.onabort=i.onerror=function(){var e=c.error?c.error:c.transaction.error;a(e)}}catch(e){a(e)}}))})).catch(a)}));return f(a,r),a},removeItem:function(e,t){var r=this;e=h(e);var n=new Promise((function(t,n){r.ready().then((function(){I(r._dbInfo,w,(function(a,o){if(a)return n(a);try{var i=o.objectStore(r._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){n(i.error)},o.onabort=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return f(n,t),n},clear:function(e){var t=this,r=new Promise((function(e,r){t.ready().then((function(){I(t._dbInfo,w,(function(n,a){if(n)return r(n);try{var o=a.objectStore(t._dbInfo.storeName).clear();a.oncomplete=function(){e()},a.onabort=a.onerror=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return f(r,e),r},length:function(e){var t=this,r=new Promise((function(e,r){t.ready().then((function(){I(t._dbInfo,A,(function(n,a){if(n)return r(n);try{var o=a.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return f(r,e),r},keys:function(e){var t=this,r=new Promise((function(e,r){t.ready().then((function(){I(t._dbInfo,A,(function(n,a){if(n)return r(n);try{var o=a.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];o.onsuccess=function(){var t=o.result;t?(i.push(t.key),t.continue()):e(i)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return f(r,e),r},dropInstance:function(e,t){t=m.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,a=this;if(e.name){const t=e.name===r.name&&a._dbInfo.db?Promise.resolve(a._dbInfo.db):L(e).then((t=>{const r=b[e.name],n=r.forages;r.db=t;for(var a=0;a<n.length;a++)n[a]._dbInfo.db=t;return t}));n=e.storeName?t.then((t=>{if(!t.objectStoreNames.contains(e.storeName))return;const r=t.version+1;M(e);const n=b[e.name],a=n.forages;t.close();for(let e=0;e<a.length;e++){const t=a[e];t._dbInfo.db=null,t._dbInfo.version=r}const o=new Promise(((t,n)=>{const a=l.open(e.name,r);a.onerror=e=>{a.result.close(),n(e)},a.onupgradeneeded=()=>{a.result.deleteObjectStore(e.storeName)},a.onsuccess=()=>{const e=a.result;e.close(),t(e)}}));return o.then((e=>{n.db=e;for(let t=0;t<a.length;t++){const r=a[t];r._dbInfo.db=e,x(r._dbInfo)}})).catch((t=>{throw(_(e,t)||Promise.resolve()).catch((()=>{})),t}))})):t.then((t=>{M(e);const r=b[e.name],n=r.forages;t.close();for(var a=0;a<n.length;a++){n[a]._dbInfo.db=null}const o=new Promise(((t,r)=>{var n=l.deleteDatabase(e.name);n.onerror=()=>{const e=n.result;e&&e.close(),r(n.error)},n.onblocked=()=>{console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=()=>{const e=n.result;e&&e.close(),t(e)}}));return o.then((e=>{r.db=e;for(var t=0;t<n.length;t++){x(n[t]._dbInfo)}})).catch((t=>{throw(_(e,t)||Promise.resolve()).catch((()=>{})),t}))}))}else n=Promise.reject("Invalid arguments");return f(n,t),n}};const D=new Map;function O(e,t){let r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}var B={_driver:"tempStorageWrapper",_initStorage:async function(e){const t={};if(e)for(let r in e)t[r]=e[r];const r=t.keyPrefix=O(e,this._defaultConfig);this._dbInfo=t,D.has(r)||D.set(r,new Map)},getItem:function(e,t){e=h(e);const r=this.ready().then((()=>D.get(this._dbInfo.keyPrefix).get(e)));return f(r,t),r},setItem:function(e,t,r){e=h(e);const n=this.ready().then((()=>(void 0===t&&(t=null),D.get(this._dbInfo.keyPrefix).set(e,t),t)));return f(n,r),n},removeItem:function(e,t){e=h(e);const r=this.ready().then((()=>{D.get(this._dbInfo.keyPrefix).delete(e)}));return f(r,t),r},clear:function(e){const t=this.ready().then((()=>{const e=this._dbInfo.keyPrefix;D.has(e)&&D.delete(e)}));return f(t,e),t},length:function(e){const t=this.ready().then((()=>D.get(this._dbInfo.keyPrefix).size));return f(t,e),t},keys:function(e){const t=this.ready().then((()=>[...D.get(this._dbInfo.keyPrefix).keys()]));return f(t,e),t},dropInstance:function(e,t){if(t=m.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){const t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}let r;return r=e.name?new Promise((t=>{e.storeName?t(O(e,this._defaultConfig)):t(`${e.name}/`)})).then((e=>{D.delete(e)})):Promise.reject("Invalid arguments"),f(r,t),r}};const Z=(e,t)=>{const r=e.length;let n=0;for(;n<r;){if((a=e[n])===(o=t)||"number"==typeof a&&"number"==typeof o&&isNaN(a)&&isNaN(o))return!0;n++}var a,o;return!1},E=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},F={},U={},j={INDEXEDDB:P,TEMPSTORAGE:B},z=[j.INDEXEDDB._driver,j.TEMPSTORAGE._driver],H=["dropInstance"],J=["clear","getItem","keys","length","removeItem","setItem"].concat(H),G={description:"",driver:z.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function V(e,t){e[t]=function(){const r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function W(){for(let e=1;e<arguments.length;e++){const t=arguments[e];if(t)for(let e in t)t.hasOwnProperty(e)&&(E(t[e])?arguments[0][e]=t[e].slice():arguments[0][e]=t[e])}return arguments[0]}class ${constructor(e){for(let e in j)if(j.hasOwnProperty(e)){const t=j[e],r=t._driver;this[e]=r,F[r]||this.defineDriver(t)}this._defaultConfig=W({},G),this._config=W({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((()=>{}))}config(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(let t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config}defineDriver(e,t,r){const n=new Promise((function(t,r){try{const n=e._driver,a=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(a);const o=J.concat("_initStorage");for(let t=0,n=o.length;t<n;t++){const n=o[t];if((!Z(H,n)||e[n])&&"function"!=typeof e[n])return void r(a)}const i=function(){const t=function(e){return function(){const t=new Error(`Method ${e} is not implemented by the current driver`),r=Promise.reject(t);return f(r,arguments[arguments.length-1]),r}};for(let r=0,n=H.length;r<n;r++){const n=H[r];e[n]||(e[n]=t(n))}};i();const s=function(r){F[n]&&console.info(`Redefining LocalForage driver: ${n}`),F[n]=e,U[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(s,r):s(!!e._support):s(!0)}catch(e){r(e)}}));return g(n,t,r),n}driver(){return this._driver||null}getDriver(e,t,r){const n=F[e]?Promise.resolve(F[e]):Promise.reject(new Error("Driver not found."));return g(n,t,r),n}ready(e){const t=this,r=t._driverSet.then((()=>(null===t._ready&&(t._ready=t._initDriver()),t._ready)));return g(r,e,e),r}setDriver(e,t,r){const n=this;E(e)||(e=[e]);const a=this._getSupportedDrivers(e);function o(){n._config.driver=n.driver()}function i(e){return n._extend(e),o(),n._ready=n._initStorage(n._config),n._ready}const s=null!==this._driverSet?this._driverSet.catch((()=>Promise.resolve())):Promise.resolve();return this._driverSet=s.then((()=>{const e=a[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((e=>{n._driver=e._driver,o(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){let t=0;return function r(){for(;t<e.length;){let a=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(a).then(i).catch(r)}o();const a=new Error("No available storage method found.");return n._driverSet=Promise.reject(a),n._driverSet}()}}(a)}))})).catch((()=>{o();const e=new Error("No available storage method found.");return n._driverSet=Promise.reject(e),n._driverSet})),g(this._driverSet,t,r),this._driverSet}supports(e){return!!U[e]}_extend(e){W(this,e)}_getSupportedDrivers(e){const t=[];for(let r=0,n=e.length;r<n;r++){const n=e[r];this.supports(n)&&t.push(n)}return t}_wrapLibraryMethodsWithReady(){for(let e=0,t=J.length;e<t;e++)V(this,J[e])}createInstance(e){return new $(e)}}var K=new $;Date.prototype.kUtilFormat=function(e){const t={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"H+":this.getUTCHours(),"h+":this.getUTCHours()%12||12,"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+3)/3),"S+":this.getUTCMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getUTCFullYear()+"").substr(4-RegExp.$1.length)));for(let r in t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("000"+t[r]).substr(("000"+t[r]).length-RegExp.$1.length)));return e};let X,Y,q,Q,ee,te,re,ne=e=>{let r,a,o,i,s,c,l,u,f,g,h=t.btoa,m=t.atob,y=e.bd;const p=["https://mlts.dynamsoft.com/","https://slts.dynamsoft.com/"];let b,v,A,w,S,M,x,_,k,L,C,N,R,T,I,P,D,O,B=p,Z=!1,E=Promise.resolve(),F=e.log&&((...t)=>{try{e.log.apply(null,t)}catch(e){setTimeout((()=>{throw e}),0)}})||(()=>{}),U=y&&F||(()=>{}),j=e=>e.join(""),z={a:[80,88,27,82,145,164,199,211],b:[187,87,89,128,150,44,190,213],c:[89,51,74,53,99,72,82,118],d:[99,181,118,158,215,103,76,117],e:[99,51,86,105,100,71,120,108],f:[97,87,49,119,98,51,74,48,83,50,86,53],g:[81,85,86,84,76,85,100,68,84,81,32,32],h:[90,87,53,106,99,110,108,119,100,65,32,32],i:[90,71,86,106,99,110,108,119,100,65,32,32],j:[97,88,89,32],k:[29,83,122,137,5,180,157,114],l:[100,71,70,110,84,71,86,117,90,51,82,111]},H=()=>t[j(z.c)][j(z.e)][j(z.f)]("raw",new Uint8Array(z.a.concat(z.b,z.d,z.k)),j(z.g),!0,[j(z.h),j(z.i)]),J=async e=>{if(t[j(z.c)]&&t[j(z.c)][j(z.e)]&&t[j(z.c)][j(z.e)][j(z.f)]){let r=m(e),n=new Uint8Array(r.length);for(let e=0;e<r.length;++e)n[e]=r.charCodeAt(e);let a=n.subarray(0,12),o=n.subarray(a.length);T||(T=await H());let i=await t[j(z.c)][j(z.e)][j(z.i)]({name:j(z.g),[j(z.j)]:a,[j(z.l)]:128},T,o);return String.fromCharCode.apply(null,new Uint8Array(i))}},G=async e=>{if(t[j(z.c)]&&t[j(z.c)][j(z.e)]&&t[j(z.c)][j(z.e)][j(z.f)]){let r=new Uint8Array(e.length);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t);let n=t.crypto.getRandomValues(new Uint8Array(12));T||(T=await H());let a=await t[j(z.c)][j(z.e)][j(z.h)]({name:j(z.g),[j(z.j)]:n,[j(z.l)]:128},T,r),o=new Uint8Array(a),i=new Uint8Array(n.length+o.length);return i.set(n),i.set(o,n.length),h(String.fromCharCode.apply(null,i))}},V=e=>m(m(e.replace(/\n/g,"+").replace(/\s/g,"=")).substring(1)),W=e=>h(String.fromCharCode(97+25*Math.random())+h(e)).replace(/\+/g,"\n").replace(/=/g," "),$=()=>{if(I)return I;if(t.crypto){let e=new Uint8Array(36);t.crypto.getRandomValues(e);let r="";for(let t=0;t<36;++t){let n=e[t]%36;r+=n<10?n:String.fromCharCode(n+87)}return r}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},X="Failed to connect to the Dynamsoft License Server. The cached license has expired. Please get connected to the network as soon as possible or contact the site administrator for more information.",Y="Failed to connect to the Dynamsoft License Server: network timed out. Check your Internet connection or [contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.",q="Failed to connect to the Dynamsoft License Server: network timed out. Check your Internet connection or contact the site administrator for more information.",Q="Failed to connect to the Dynamsoft License Server: network connection error. Check your Internet connection or [contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.",ee="Failed to connect to the Dynamsoft License Server: network connection error. Check your Internet connection or contact the site administrator for more information.",te="Your system date and time appear to have been changed, causing the license to fail. Please correct the system data and time and try again.",re=async()=>{await(async()=>{M||(M=K)})(),j=e=>m(String.fromCharCode.apply(null,e).replace(/\n/g,"+").replace(/\s/g,"="));{let e=await M.createInstance({name:r+"jshello"});await e.setItem(r+"jshello","available")}if(_=await M.createInstance({name:"dynamltsinfo"}),k=I?null:h(h("v2")+String.fromCharCode(l.charCodeAt(l.length/2)+1)+h(l)),L=h(String.fromCharCode(i.charCodeAt(0)+10)+h(r)+h(i)+o+h(""+c)),!I){try{let e=await _.getItem(k);e&&([u,w]=JSON.parse(await V(e)))}catch(e){}try{null==u&&(u=$())}catch(e){}}x=await M.createInstance({name:"dynamdlsuns"+h(h("v2"))+h(String.fromCharCode(i.charCodeAt(0)+10)+h(r)+h(i)+o+h(""+c))});try{s=await _.getItem(L)}catch(e){}},ne=async e=>{P||(P=(async()=>{try{let t={pd:r,vm:o,v:a,dt:c||"browser",ed:"javascript",cu:u,ad:l,os:f,fn:g};A&&(t.rmk=A),i&&(t=-1!=i.indexOf("-")?{...t,hs:i}:{...t,og:i});let n={};if(w&&!I){let e=await _.getItem(k);e&&([u,w]=JSON.parse(await V(e))),n["lts-time"]=w}v&&(t.sp=v);let d=await Promise.race([(async()=>{let r,a=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");w&&!I&&(_.setItem(k,await W(JSON.stringify([u,a]))),w=a);let o,i="auth/?ext="+encodeURIComponent(h(JSON.stringify(t))),c=!1,d=!1,l=async e=>{if(e&&!e.ok)try{let t=await e.text();if(t){let e=JSON.parse(t);e.errorCode&&(o=e,e.errorCode>100&&e.errorCode<200&&(s=null,c=!0,d=!0))}}catch(e){}};try{r=await Promise.race([fetch(B[0]+i,{headers:n,cache:e?"reload":"default",mode:"cors"}),new Promise(((e,t)=>setTimeout(t,1e4)))]),await l(r)}catch(e){}if(!(s||r&&r.ok||c))try{r=await Promise.race([fetch(B[1]+i,{headers:n,mode:"cors"}),new Promise(((e,t)=>setTimeout(t,3e4)))]),await l(r)}catch(e){}if(!(s||r&&r.ok||c))try{r=await Promise.race([fetch(B[0]+i,{headers:n,mode:"cors"}),new Promise(((e,t)=>setTimeout(t,3e4)))]),await l(r)}catch(e){}o&&151==o.errorCode&&(I||_.removeItem(k),_.removeItem(L),u=$(),t.cu=u,w=void 0,i="auth/?ext="+encodeURIComponent(h(JSON.stringify(t))),r=await Promise.race([fetch(B[0]+i,{headers:n,mode:"cors"}),new Promise(((e,t)=>setTimeout(t,3e4)))]),await l(r));(()=>{if(!r||!r.ok){let e;d&&_.setItem(L,""),o?111==o.errorCode?e=o.message:(e=o.message.trim(),e.endsWith(".")||(e+="."),e=b?`An error occurred during authorization: ${e} [Contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.`:`An error occurred during authorization: ${e} Contact the site administrator for more information.`):e=b?Q:ee;let t=Error(e);throw o&&o.errorCode&&(t.ltsErrorCode=o.errorCode),t}})();let f=await r.text();try{w||I||(_.setItem(k,await W(JSON.stringify([u,a]))),w=a),_.setItem(L,f)}catch(e){}return f})(),new Promise(((e,t)=>{let r;r=b?Y:q,setTimeout((()=>t(new Error(r))),s?3e3:15e3)}))]);s=d}catch(e){y&&console.error(e),S=e}P=null})()),await P,D||(D=Date.now()+6e4)},ae=async()=>{O||(O=(async()=>{if(U(u),!s){if(!Z)throw F(S.message),S;return}let e={dm:l};y&&(e.bd=!0),e.brtk=!0,e.ls=B[0],i&&(-1!=i.indexOf("-")?e.hs=i:e.og=i),e.cu=u,g&&(e.fn=g),r&&(e.pd=r),a&&(e.v=a),c&&(e.dt=c),f&&(e.os=f),A&&(e.rmk=A),U(s);try{let t=JSON.parse(await J(s));t.ba&&(e.ba=t.ba),t.usu&&(e.usu=t.usu),t.trial&&(e.trial=t.trial),t.its&&(e.its=t.its),1==e.trial&&t.msg?e.msg=t.msg:S?e.msg=S.message||S:t.msg&&(e.msg=t.msg),e.ar=t.in,e.bafc=!!S}catch(e){}U(e);try{await C(e)}catch(e){}await oe(),Z||(Z=!0),O=null})()),await O},oe=async()=>{let e=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),t=await R();if(U(t),t&&t<e)throw S?new Error(X):new Error(te)};const ie=new n;let se=null,ce=async(e,t)=>(E=E.then((async()=>{try{let r=await x.keys();if(t||(ie.isFulfilled?e&&(r=r.filter((t=>t<e))):e&&r.includes(e)?r=[e]:(r=[],U("Unexpected null key"))),!r.length)return;for(let e=0;e<r.length/1e3;++e){let t=r.slice(1e3*e,1e3*(e+1)),n=[];for(let e=0;e<t.length;++e)n.push(await x.getItem(t[e]));if(w=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),!I){let e=await _.getItem(k);e&&([u]=JSON.parse(await V(e))),_.setItem(k,await W(JSON.stringify([u,w])))}try{let e=B[0]+"verify/v2";w&&!I&&(e+="?ltstime="+encodeURIComponent(w)),!ie.isFulfilled&&d&&ie.resolve();let r=await fetch(e,{method:"POST",body:n.join(";"),keepalive:!0});if(ie.isFulfilled||ie.resolve(),!r.ok)throw new Error("verify failed. Status Code: "+r.status);for(let e=0;e<t.length;++e)await x.removeItem(t[e])}catch(e){throw ie.isFulfilled||ie.resolve(),e}}}catch(e){}})),await E);return{i:async e=>{r=e.pd,a=e.v,o=a.split(".")[0],e.dt&&(c=e.dt),l=e.dm,i=e.l||"",f="string"!=typeof e.os?JSON.stringify(e.os):e.os,g=e.fn,"string"==typeof g&&(g=g.substring(0,50)),e.ls&&e.ls.length&&(B=e.ls,1==B.length&&B.push(B[0])),b=p===B&&(!i||"200001"===i||i.startsWith("200001-")),v=e.sp,A=e.rmk,e.lf&&(M=e.lf),e.lsu&&(u=I=e.lsu),e.fdaa&&(J=e.fdaa),e.feab&&(G=e.feab),C=e.updl,N=e.mnet,R=e.mxet,await re(),await ne(),await ae(),(!S||S.ltsErrorCode>=102&&S.ltsErrorCode<=120)&&ce(null,!0)},c:async()=>{let e=new Date,t=e.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),r=await N(),n=await R();if(n&&n<t)await ne(!0),await ae();else if(r&&r<t){e.setMinutes(e.getMinutes()-6);let t=e;e=null;let r=t.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");w<r&&ne().then((()=>ae()))}},s:async(e,t,r,n)=>{try{let e;e=t.startsWith("{")&&t.endsWith("}")?await G(t):t,e?await x.setItem(r,e):U("ept ecpt")}catch(e){}n&&await ce(r),se&&clearTimeout(se),se=setTimeout((async()=>{await ce()}),36e4)},p:ie,r:async()=>{ie.isPending&&D&&D<Date.now()&&(D=Date.now()+6e4,await fetch(B[1]+"lts/test"))}}},ae=t,oe="LabelRecognizerWasm",ie=0,se=0;let ce=new n,de=!1,le=async e=>{await ce,ee=e.trial,te=e.msg,Module[oe].init(JSON.stringify(e))},ue=()=>{let e=Module[oe].getMinExpireTime;return e?e():null},fe=()=>{let e=Module[oe].getMaxExpireTime;return e?e():null},ge={},he=new Map,me=0;const ye=async(e,t)=>{ge[e]||(t?"@engineResourcePath"===t&&(t=Y):t="",t+=e+"/",ge[e]=(async()=>{try{let r,n,a;ae.postMessage({type:"event",body:{type:"resourcesLoadStarted",resourcesPath:t+e+".data"}});const o=new TextDecoder;{const n=await new Promise(((r,n)=>{const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onload=()=>{r({ok:!0,arrayBuffer:()=>a.response})},a.onerror=a.timeout=a.onabort=()=>{r({ok:!1,status:a.status})};let o=Date.now();a.onprogress=r=>{if(r.lengthComputable){const n=Date.now();o+500<n&&(ae.postMessage({type:"event",body:{type:"resourcesLoadProgress",loaded:r.loaded,total:r.total,resourcesPath:t+e+".data"}}),o=n)}},a.open("GET",t+e+".data",!0),a.send()}));if(!n.ok)throw new Error(`Network error. Status: ${n.status}.`);r=await n.arrayBuffer()}{if(!o.decode(new Uint8Array(r,0,8)).startsWith("DLR_MDL"))throw new Error("Model data type incorrect.");let e=0;const t=new Uint8Array(r,8,8);for(let r=7;r>=0;--r)e=256*e+t[r];const i=o.decode(new Uint8Array(r,16,e));n=JSON.parse(i),a=16+e}let i=e=>{const t=n[e];if(!t)throw new Error("File name not found.");return new Uint8Array(r,a+t[0],t[1])},s=JSON.parse(o.decode(i(e+".config.json")));const c=s.mainModel,d=s.assistModels,l=s.modelFilter;{const t=i(c+".prototxt"),r=i(c+".txt"),n=i(c+".caffemodel");Module[oe].appendCaffeModelBuffer(e,t,r,n)}if(d)for(let t of d){const r=e+t,n=c+t,a=i(n+".prototxt"),o=i(n+".txt"),s=i(n+".caffemodel");Module[oe].appendCaffeModelBuffer(r,a,o,s)}return l&&Module[oe].appendModelFilterFileBuffer(e,i(l+".txt")),ge[e]=!0,ae.postMessage({type:"event",body:{type:"resourcesLoaded",resourcesPath:t+e+".data"}}),!0}catch(t){throw delete ge[e],t}})()),await ge[e]},pe="(P[A-Z<][A-Z<]{3}([A-Z<]{0,35}[A-Z]{1,3}[(<<)][A-Z]{1,3}[A-Z<]{0,35}<{0,35}){(39)}){(44)}|([A-Z0-9<]{9}[0-9][A-Z<]{3}[0-9]{2}[(01-12)][(01-31)][0-9][MF<][0-9]{2}[(01-12)][(01-31)][0-9][A-Z0-9<]{14}[0-9<][0-9]){(44)}",be="(V[A-Z<][A-Z<]{3}([A-Z<]{0,27}[A-Z]{1,3}[(<<)][A-Z]{1,3}[A-Z<]{0,27}){(31)}){(36)}|([A-Z0-9<]{9}[0-9][A-Z<]{3}[0-9]{2}[(01-12)][(01-31)][0-9][MF<][0-9]{2}[(01-12)][(01-31)][0-9][A-Z0-9<]{8}){(36)}|(V[A-Z<][A-Z<]{3}([A-Z<]{0,35}[A-Z]{1,3}[(<<)][A-Z]{1,3}[A-Z<]{0,35}<{0,35}){(39)}){(44)}|([A-Z0-9<]{9}[0-9][A-Z<]{3}[0-9]{2}[(01-12)][(01-31)][0-9][MF<][0-9]{2}[(01-12)][(01-31)][0-9][A-Z0-9<]{14}[A-Z0-9<]{2}){(44)}",ve="([ACI][A-Z<][A-Z<]{3}[A-Z0-9<]{9}[0-9][A-Z0-9<]{15}){(30)}|([0-9]{2}[(01-12)][(01-31)][0-9][MF<][0-9]{2}[(01-12)][(01-31)][0-9][A-Z<]{3}[A-Z0-9<]{11}[0-9]){(30)}|([A-Z<]{0,26}[A-Z]{1,3}[(<<)][A-Z]{1,3}[A-Z<]{0,26}<{0,26}){(30)}|([ACIV][A-Z<][A-Z<]{3}([A-Z<]{0,27}[A-Z]{1,3}[(<<)][A-Z]{1,3}[A-Z<]{0,27}){(31)}){(36)}|([A-Z0-9<]{9}[0-9][A-Z<]{3}[0-9]{2}[(01-12)][(01-31)][0-9][MF<][0-9]{2}[(01-12)][(01-31)][0-9][A-Z0-9<]{8}){(36)}|([PV][A-Z<][A-Z<]{3}([A-Z<]{0,35}[A-Z]{1,3}[(<<)][A-Z]{1,3}[A-Z<]{0,35}<{0,35}){(39)}){(44)}|([A-Z0-9<]{9}[0-9][A-Z<]{3}[0-9]{2}[(01-12)][(01-31)][0-9][MF<][0-9]{2}[(01-12)][(01-31)][0-9][A-Z0-9<]{14}[A-Z0-9<]{2}){(44)}",Ae="([0-9A-Z]{17,19}){(17,19)}",we=e=>{e.CharacterModelArray[0].Name="VIN";const t=e.LabelRecognizerParameterArray[0];t.CharacterModelName="VIN",t.GrayscaleTransformationModes[0]={Mode:"GTM_AUTO"},t.BinarizationModes[0].Mode="BM_LOCAL_BLOCK",t.BinarizationModes[0].EnableFillBinaryVacancy=0,t.LineStringRegExPattern=Ae,t.LineStringLengthRange=[17,19],t.LetterHeightRange=[5,1e3,1],e.TextAreaArray[0].CharacterModelName="VIN",e.TextAreaArray[0].GrayscaleTransformationModes[0]={Mode:"GTM_AUTO"},e.TextAreaArray[0].BinarizationModes[0].Mode="BM_LOCAL_BLOCK",e.TextAreaArray[0].BinarizationModes[0].EnableFillBinaryVacancy=0,e.TextAreaArray[0].LineStringRegExPattern=Ae,e.TextAreaArray[0].LineStringLengthRange=[17,19],e.TextAreaArray[0].LetterHeightRange=[5,1e3,1]};let Se=async function(e){const r=e.data?e.data:e,n=r.id,a=r.instanceID,o=r.body;switch(Q&&"recognizeByBuffer"==r.type&&await re.c(),r.type){case"loadWasm":try{X=r.bd,Y=r.engineResourcePath,q=r.v;let e=r.dm,n=r.l;Q=r.brtk;let a,o=r.bptk;(async()=>{if(de)throw"can't load wasm twice";de=!0,Me("wasm loading...");let e=Date.now();await new Promise((async e=>{t.KModule=t.Module={locateFile:function(e){return"libDynamsoftLabelRecognizer.wasm"==e?Y+"dlr-"+q+".wasm":Y+e},print:e=>{Me(e)},printErr:e=>{console.error(e),Me(e)},onRuntimeInitialized:e},importScripts(Y+"dlr-"+q+".wasm.js")})),Me("wasm initialized, cost "+(Date.now()-e)+" ms"),Module=KModule,ce.resolve()})();let i=async()=>{try{re=ne({log:Me,bd:X}),t.scsd=re.s,r.pd="dlr",r.updl=le,r.mnet=ue,r.mxet=fe,await re.i(r)}catch(e){if(!o)throw e;Q=!1,await s(),a=e.ltsErrorCode,te=e.message||e}},s=async()=>{let t={pk:n,dm:e};X&&(t.bd=!0),await le(t)};Q?await i():await s(),ae.postMessage({type:"load",success:!0,version:Module[oe].getVersion(),trial:ee,ltsErrorCode:a,message:te})}catch(e){let t=e&&e.message;ae.postMessage({type:"load",success:!1,ltsErrorCode:e&&e.ltsErrorCode,message:t,trial:ee,stack:X&&e?e.stack:null})}break;case"createInstance":{const e=me++;try{let t=new Module[oe](r.bScanner,e);t.currentCaffeModelName="NumberLetter",he.set(e,t)}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,instanceID:e}});break}case"destroy":try{if(!he.get(a))break;he.get(a).delete(),he.delete(a)}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0}});break;case"recognizeByBuffer":{let e,t,r,c,d=Date.now(),l=o.imageData.bytes;try{const n=he.get(a);await ye(n.currentCaffeModelName,Y),e=X?Date.now():0,i=o.imageData.bytes,(s=o.imageData.stride*o.imageData.height)>ie&&(se&&Module._free(se),se=Module._malloc(s),ie=s),Module.HEAPU8.set(i.subarray(0,s),se),o.imageData.bytes={ptr:se},t=X?Date.now():0,c=JSON.parse(n.recognizeByBuffer(JSON.stringify(o.imageData),o.config&&o.config.modelName||"",!(!o.config||!o.config.bScanner))),r=Date.now()}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,decodeReturn:c,buffer:l,duration:Date.now()-d}}),xe(["timeWorkerGetMsg: "+d,"timeBeforeSendBufferToWasm: "+e+" "+(e-d),"timeBeforeDecode: "+t+" "+(t-e),"timeFinishDecode: "+r+" "+(r-t)].join("\n"));break}case"updateReferenceRegionFromBarcodeResults":{let e;try{e=JSON.parse(he.get(a).updateReferenceRegionFromBarcodeResults(JSON.stringify(o.dbrTextResults),""))}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,updateReturn:e}});break}case"clearMapDecodeRecord":try{he.get(a).clearMapDecodeRecord()}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0}});break;case"getRuntimeSettings":{let e;try{e=he.get(a).getRuntimeSettings()}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,results:e}});break}case"updateRuntimeSettings":{let e;try{const t=he.get(a),r=JSON.parse(o.settings).characterModelName;t.currentCaffeModelName=r,e=JSON.parse(t.updateRuntimeSettings(o.settings)),await ye(r,Y)}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,updateReturn:e}});break}case"resetRuntimeSettings":try{const e=he.get(a);e.currentCaffeModelName="NumberLetter",e.resetRuntimeSettings()}catch(t){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0}});break;case"appendSettingsFromString":{let e;try{e=JSON.parse(he.get(a).appendSettingsFromString(o.settings))}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,updateReturn:e}});break}case"clearAppendedSettings":try{he.get(a).clearAppendedSettings()}catch(t){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0}});break;case"updateRuntimeSettingsFromString":{let e;try{const t=he.get(a);let r=o.settings;if("string"==typeof r)if(r=r.trim(),r.startsWith("{"))r=JSON.parse(r);else{if(r.length>50)throw new Error("Error: preset longer than 50 letters.");const e=r.toLowerCase().split("-");if(e.length>2)throw new Error(`Error: '${r}' is not supported.`);if(t.resetRuntimeSettings(),r=JSON.parse(t.outputSettingsToString()),e.includes("numberletter"))(e=>{e.CharacterModelArray[0].Name="NumberLetter";const t=e.LabelRecognizerParameterArray[0];t.CharacterModelName="NumberLetter",t.GrayscaleTransformationModes[0]={Mode:"GTM_AUTO"},t.LetterHeightRange[0]=5,t.LineStringLengthRange=[3,999],e.TextAreaArray[0].CharacterModelName="NumberLetter",e.TextAreaArray[0].GrayscaleTransformationModes[0]={Mode:"GTM_AUTO"},e.TextAreaArray[0].LetterHeightRange[0]=5,e.TextAreaArray[0].LineStringLengthRange=[3,999]})(r);else if(e.includes("number"))(e=>{e.CharacterModelArray[0].Name="Number";const t=e.LabelRecognizerParameterArray[0];t.CharacterModelName="Number",t.GrayscaleTransformationModes[0]={Mode:"GTM_AUTO"},t.LetterHeightRange[0]=5,t.LineStringLengthRange=[3,999],e.TextAreaArray[0].CharacterModelName="Number",e.TextAreaArray[0].GrayscaleTransformationModes[0]={Mode:"GTM_AUTO"},e.TextAreaArray[0].LetterHeightRange[0]=5,e.TextAreaArray[0].LineStringLengthRange=[3,999]})(r);else if(e.includes("letter"))(e=>{e.CharacterModelArray[0].Name="Letter";const t=e.LabelRecognizerParameterArray[0];t.CharacterModelName="Letter",t.GrayscaleTransformationModes[0]={Mode:"GTM_AUTO"},t.LetterHeightRange[0]=5,t.LineStringLengthRange=[3,999],e.TextAreaArray[0].CharacterModelName="Letter",e.TextAreaArray[0].GrayscaleTransformationModes[0]={Mode:"GTM_AUTO"},e.TextAreaArray[0].LetterHeightRange[0]=5,e.TextAreaArray[0].LineStringLengthRange=[3,999]})(r);else if(e.includes("numberuppercase"))(e=>{e.CharacterModelArray[0].Name="NumberUppercase";const t=e.LabelRecognizerParameterArray[0];t.CharacterModelName="NumberUppercase",t.GrayscaleTransformationModes[0]={Mode:"GTM_AUTO"},t.LetterHeightRange[0]=5,t.LineStringLengthRange=[3,999],e.TextAreaArray[0].CharacterModelName="NumberUppercase",e.TextAreaArray[0].GrayscaleTransformationModes[0]={Mode:"GTM_AUTO"},e.TextAreaArray[0].LetterHeightRange[0]=5,e.TextAreaArray[0].LineStringLengthRange=[3,999]})(r);else if(e.includes("passportmrz"))(e=>{e.CharacterModelArray[0].Name="MRZ";const t=e.LabelRecognizerParameterArray[0];t.CharacterModelName="MRZ",t.LetterHeightRange[0]=5,t.LineStringLengthRange=[44,44],t.LineStringRegExPattern=pe,t.MaxLineCharacterSpacing=130,t.TextureDetectionModes[0].Sensitivity=8,e.LineSpecificationArray=[{Name:"L0",LineNumber:"",BinarizationModes:[{BlockSizeX:30,BlockSizeY:30,Mode:"BM_LOCAL_BLOCK"}]}],e.TextAreaArray[0].CharacterModelName="MRZ",e.TextAreaArray[0].LetterHeightRange[0]=5,e.TextAreaArray[0].LineStringLengthRange=[44,44],e.TextAreaArray[0].LineStringRegExPattern=pe,e.TextAreaArray[0].MaxLineCharacterSpacing=130,e.TextAreaArray[0].TextureDetectionModes[0].Sensitivity=8,e.TextAreaArray[0].LineSpecificationNameArray=["L0"]})(r);else if(e.includes("visamrz"))(e=>{e.CharacterModelArray[0].Name="MRZ";const t=e.LabelRecognizerParameterArray[0];t.CharacterModelName="MRZ",t.LetterHeightRange[0]=5,t.LineStringLengthRange=[36,44],t.LineStringRegExPattern=be,t.MaxLineCharacterSpacing=130,t.TextureDetectionModes[0].Sensitivity=8,e.LineSpecificationArray=[{Name:"L0",LineNumber:"",BinarizationModes:[{BlockSizeX:30,BlockSizeY:30,Mode:"BM_LOCAL_BLOCK"}]}],e.TextAreaArray[0].CharacterModelName="MRZ",e.TextAreaArray[0].LetterHeightRange[0]=5,e.TextAreaArray[0].LineStringLengthRange=[36,44],e.TextAreaArray[0].LineStringRegExPattern=be,e.TextAreaArray[0].MaxLineCharacterSpacing=130,e.TextAreaArray[0].TextureDetectionModes[0].Sensitivity=8,e.TextAreaArray[0].LineSpecificationNameArray=["L0"]})(r);else if(e.includes("mrz"))(e=>{e.CharacterModelArray[0].Name="MRZ";const t=e.LabelRecognizerParameterArray[0];t.CharacterModelName="MRZ",t.LetterHeightRange[0]=5,t.LineStringLengthRange=[30,44],t.LineStringRegExPattern=ve,t.MaxLineCharacterSpacing=130,t.TextureDetectionModes[0].Sensitivity=8,e.LineSpecificationArray=[{Name:"L0",LineNumber:"",BinarizationModes:[{BlockSizeX:30,BlockSizeY:30,Mode:"BM_LOCAL_BLOCK"}]}],e.TextAreaArray[0].CharacterModelName="MRZ",e.TextAreaArray[0].LetterHeightRange[0]=5,e.TextAreaArray[0].LineStringLengthRange=[30,44],e.TextAreaArray[0].LineStringRegExPattern=ve,e.TextAreaArray[0].MaxLineCharacterSpacing=130,e.TextAreaArray[0].TextureDetectionModes[0].Sensitivity=8,e.TextAreaArray[0].LineSpecificationNameArray=["L0"]})(r);else if(e.includes("vin"))we(r);else if(e.includes("vin_na"))we(r);else if(!e.includes("cppdefault"))throw new Error(`Error: '${r}' is not supported.`);e.includes("video")&&(e=>{const t=e.LabelRecognizerParameterArray[0];"VIN"===e.CharacterModelArray[0].Name&&(t.LineStringLengthRange=[17,19],e.TextAreaArray[0].LineStringLengthRange=[17,19]);let r=10*t.LetterHeightRange[0];const n=Math.max(500,t.LetterHeightRange[0]);r>=n&&(r=n),t.LetterHeightRange[0]=r,e.TextAreaArray[0].LetterHeightRange[0]=r})(r)}const n=r.CharacterModelArray[0].Name;t.currentCaffeModelName=n,e=JSON.parse(t.updateRuntimeSettingsFromString(JSON.stringify(r))),await ye(n,Y)}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,updateReturn:e}});break}case"outputSettingsToString":{let e;try{e=he.get(a).outputSettingsToString()}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,results:e}});break}case"appendCaffeModelBuffer":try{await ye(o.name,o.folderUrl)}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0}});break;case"eraseCaffeModelByName":try{Module[oe].eraseCaffeModelByName(o.name),delete ge[o.name]}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0}});break;case"eraseAllCaffeModels":try{Module[oe].eraseAllCaffeModels(),ge={}}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0}});break;case"setModeArgument":{let e;try{e=JSON.parse(he.get(a).setModeArgument(o.modeName,o.index,o.argumentName,o.argumentValue))}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,setReturn:e}});break}case"getModeArgument":{let e;try{e=JSON.parse(he.get(a).getModeArgument(o.modeName,o.index,o.argumentName))}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,getReturn:e}});break}case"updateScanSettings":try{let e=he.get(a),t=o.settings;e.duplicateForgetTime=t.duplicateForgetTime,e.rememberFrameCount=t.rememberFrameCount,e.trustFrameCount=t.trustFrameCount}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0}});break;case"getScanSettings":{let e={};try{let t=he.get(a);e.duplicateForgetTime=t.duplicateForgetTime,e.rememberFrameCount=t.rememberFrameCount,e.trustFrameCount=t.trustFrameCount}catch(e){_e(e,n);break}ae.postMessage({type:"task",id:n,body:{success:!0,results:e}});break}default:console.warn("Unmatched task: ",e)}var i,s};ae.onmessage=Se;let Me=e=>{ae.postMessage({type:"log",message:e})},xe=e=>{X&&Me(e)},_e=(e,t)=>{ae.postMessage({type:"task",id:t,body:{success:!1,message:e.message,stack:e.stack}}),setTimeout((()=>{throw e}),0)}}();
